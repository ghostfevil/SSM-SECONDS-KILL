[2018-06-28 15:46:57.770] [consumer-pool-0] ERROR com.crossoverjie.kafka.orderconsumer.kafka.ConsumerTask consumer-pool-0, - unknown exception
java.lang.IllegalArgumentException: class com.crossoverjie.kafka.orderconsumer.pojo.Stock declares multiple JSON fields named id
	at com.google.gson.internal.bind.ReflectiveTypeAdapterFactory.getBoundFields(ReflectiveTypeAdapterFactory.java:172)
	at com.google.gson.internal.bind.ReflectiveTypeAdapterFactory.create(ReflectiveTypeAdapterFactory.java:102)
	at com.google.gson.Gson.getAdapter(Gson.java:457)
	at com.google.gson.Gson.fromJson(Gson.java:921)
	at com.google.gson.Gson.fromJson(Gson.java:887)
	at com.google.gson.Gson.fromJson(Gson.java:836)
	at com.google.gson.Gson.fromJson(Gson.java:808)
	at com.crossoverjie.kafka.orderconsumer.kafka.ConsumerTask.dealMessage(ConsumerTask.java:95)
	at com.crossoverjie.kafka.orderconsumer.kafka.ConsumerTask.run(ConsumerTask.java:82)
	at java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:511)
	at java.util.concurrent.FutureTask.run(FutureTask.java:266)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at java.lang.Thread.run(Thread.java:748)
[2018-06-28 15:57:43.187] [consumer-pool-0] ERROR com.crossoverjie.kafka.orderconsumer.kafka.ConsumerTask consumer-pool-0, - unknown exception
java.lang.IllegalArgumentException: class com.crossoverjie.kafka.orderconsumer.pojo.Stock declares multiple JSON fields named id
	at com.google.gson.internal.bind.ReflectiveTypeAdapterFactory.getBoundFields(ReflectiveTypeAdapterFactory.java:172)
	at com.google.gson.internal.bind.ReflectiveTypeAdapterFactory.create(ReflectiveTypeAdapterFactory.java:102)
	at com.google.gson.Gson.getAdapter(Gson.java:457)
	at com.google.gson.Gson.fromJson(Gson.java:921)
	at com.google.gson.Gson.fromJson(Gson.java:887)
	at com.google.gson.Gson.fromJson(Gson.java:836)
	at com.google.gson.Gson.fromJson(Gson.java:808)
	at com.crossoverjie.kafka.orderconsumer.kafka.ConsumerTask.dealMessage(ConsumerTask.java:95)
	at com.crossoverjie.kafka.orderconsumer.kafka.ConsumerTask.run(ConsumerTask.java:82)
	at java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:511)
	at java.util.concurrent.FutureTask.run(FutureTask.java:266)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at java.lang.Thread.run(Thread.java:748)
[2018-06-28 16:27:29.929] [consumer-pool-0] ERROR com.crossoverjie.kafka.orderconsumer.kafka.ConsumerTask consumer-pool-0, - unknown exception
java.lang.IllegalArgumentException: class com.crossoverjie.kafka.orderconsumer.pojo.Stock declares multiple JSON fields named version
	at com.google.gson.internal.bind.ReflectiveTypeAdapterFactory.getBoundFields(ReflectiveTypeAdapterFactory.java:172)
	at com.google.gson.internal.bind.ReflectiveTypeAdapterFactory.create(ReflectiveTypeAdapterFactory.java:102)
	at com.google.gson.Gson.getAdapter(Gson.java:457)
	at com.google.gson.Gson.fromJson(Gson.java:921)
	at com.google.gson.Gson.fromJson(Gson.java:887)
	at com.google.gson.Gson.fromJson(Gson.java:836)
	at com.google.gson.Gson.fromJson(Gson.java:808)
	at com.crossoverjie.kafka.orderconsumer.kafka.ConsumerTask.dealMessage(ConsumerTask.java:95)
	at com.crossoverjie.kafka.orderconsumer.kafka.ConsumerTask.run(ConsumerTask.java:82)
	at java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:511)
	at java.util.concurrent.FutureTask.run(FutureTask.java:266)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at java.lang.Thread.run(Thread.java:748)
[2018-06-28 17:04:18.978] [consumer-pool-0] ERROR com.crossoverjie.kafka.orderconsumer.kafka.ConsumerTask consumer-pool-0, - unknown exception
java.lang.RuntimeException: 并发更新库存失败
	at com.crossoverjie.kafka.orderconsumer.service.impl.OrderServiceImpl.saleStockOptimisticByRedis(OrderServiceImpl.java:67)
	at com.crossoverjie.kafka.orderconsumer.service.impl.OrderServiceImpl.createOptimisticOrderUseRedisAndKafka(OrderServiceImpl.java:53)
	at com.crossoverjie.kafka.orderconsumer.service.impl.OrderServiceImpl$$FastClassBySpringCGLIB$$fc85889b.invoke(<generated>)
	at org.springframework.cglib.proxy.MethodProxy.invoke(MethodProxy.java:204)
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.invokeJoinpoint(CglibAopProxy.java:738)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:157)
	at org.springframework.transaction.interceptor.TransactionInterceptor$1.proceedWithInvocation(TransactionInterceptor.java:99)
	at org.springframework.transaction.interceptor.TransactionAspectSupport.invokeWithinTransaction(TransactionAspectSupport.java:282)
	at org.springframework.transaction.interceptor.TransactionInterceptor.invoke(TransactionInterceptor.java:96)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:179)
	at org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:673)
	at com.crossoverjie.kafka.orderconsumer.service.impl.OrderServiceImpl$$EnhancerBySpringCGLIB$$34c21228.createOptimisticOrderUseRedisAndKafka(<generated>)
	at com.crossoverjie.kafka.orderconsumer.kafka.ConsumerTask.dealMessage(ConsumerTask.java:100)
	at com.crossoverjie.kafka.orderconsumer.kafka.ConsumerTask.run(ConsumerTask.java:82)
	at java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:511)
	at java.util.concurrent.FutureTask.run(FutureTask.java:266)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at java.lang.Thread.run(Thread.java:748)
[2018-06-28 17:04:18.995] [consumer-pool-0] ERROR com.crossoverjie.kafka.orderconsumer.kafka.ConsumerTask consumer-pool-0, - unknown exception
java.lang.RuntimeException: 并发更新库存失败
	at com.crossoverjie.kafka.orderconsumer.service.impl.OrderServiceImpl.saleStockOptimisticByRedis(OrderServiceImpl.java:67)
	at com.crossoverjie.kafka.orderconsumer.service.impl.OrderServiceImpl.createOptimisticOrderUseRedisAndKafka(OrderServiceImpl.java:53)
	at com.crossoverjie.kafka.orderconsumer.service.impl.OrderServiceImpl$$FastClassBySpringCGLIB$$fc85889b.invoke(<generated>)
	at org.springframework.cglib.proxy.MethodProxy.invoke(MethodProxy.java:204)
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.invokeJoinpoint(CglibAopProxy.java:738)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:157)
	at org.springframework.transaction.interceptor.TransactionInterceptor$1.proceedWithInvocation(TransactionInterceptor.java:99)
	at org.springframework.transaction.interceptor.TransactionAspectSupport.invokeWithinTransaction(TransactionAspectSupport.java:282)
	at org.springframework.transaction.interceptor.TransactionInterceptor.invoke(TransactionInterceptor.java:96)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:179)
	at org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:673)
	at com.crossoverjie.kafka.orderconsumer.service.impl.OrderServiceImpl$$EnhancerBySpringCGLIB$$34c21228.createOptimisticOrderUseRedisAndKafka(<generated>)
	at com.crossoverjie.kafka.orderconsumer.kafka.ConsumerTask.dealMessage(ConsumerTask.java:100)
	at com.crossoverjie.kafka.orderconsumer.kafka.ConsumerTask.run(ConsumerTask.java:82)
	at java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:511)
	at java.util.concurrent.FutureTask.run(FutureTask.java:266)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at java.lang.Thread.run(Thread.java:748)
[2018-06-28 17:04:23.122] [consumer-pool-0] ERROR com.crossoverjie.kafka.orderconsumer.kafka.ConsumerTask consumer-pool-0, - unknown exception
java.lang.RuntimeException: 并发更新库存失败
	at com.crossoverjie.kafka.orderconsumer.service.impl.OrderServiceImpl.saleStockOptimisticByRedis(OrderServiceImpl.java:67)
	at com.crossoverjie.kafka.orderconsumer.service.impl.OrderServiceImpl.createOptimisticOrderUseRedisAndKafka(OrderServiceImpl.java:53)
	at com.crossoverjie.kafka.orderconsumer.service.impl.OrderServiceImpl$$FastClassBySpringCGLIB$$fc85889b.invoke(<generated>)
	at org.springframework.cglib.proxy.MethodProxy.invoke(MethodProxy.java:204)
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.invokeJoinpoint(CglibAopProxy.java:738)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:157)
	at org.springframework.transaction.interceptor.TransactionInterceptor$1.proceedWithInvocation(TransactionInterceptor.java:99)
	at org.springframework.transaction.interceptor.TransactionAspectSupport.invokeWithinTransaction(TransactionAspectSupport.java:282)
	at org.springframework.transaction.interceptor.TransactionInterceptor.invoke(TransactionInterceptor.java:96)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:179)
	at org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:673)
	at com.crossoverjie.kafka.orderconsumer.service.impl.OrderServiceImpl$$EnhancerBySpringCGLIB$$34c21228.createOptimisticOrderUseRedisAndKafka(<generated>)
	at com.crossoverjie.kafka.orderconsumer.kafka.ConsumerTask.dealMessage(ConsumerTask.java:100)
	at com.crossoverjie.kafka.orderconsumer.kafka.ConsumerTask.run(ConsumerTask.java:82)
	at java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:511)
	at java.util.concurrent.FutureTask.run(FutureTask.java:266)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at java.lang.Thread.run(Thread.java:748)
[2018-06-28 17:04:23.135] [consumer-pool-0] ERROR com.crossoverjie.kafka.orderconsumer.kafka.ConsumerTask consumer-pool-0, - unknown exception
java.lang.RuntimeException: 并发更新库存失败
	at com.crossoverjie.kafka.orderconsumer.service.impl.OrderServiceImpl.saleStockOptimisticByRedis(OrderServiceImpl.java:67)
	at com.crossoverjie.kafka.orderconsumer.service.impl.OrderServiceImpl.createOptimisticOrderUseRedisAndKafka(OrderServiceImpl.java:53)
	at com.crossoverjie.kafka.orderconsumer.service.impl.OrderServiceImpl$$FastClassBySpringCGLIB$$fc85889b.invoke(<generated>)
	at org.springframework.cglib.proxy.MethodProxy.invoke(MethodProxy.java:204)
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.invokeJoinpoint(CglibAopProxy.java:738)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:157)
	at org.springframework.transaction.interceptor.TransactionInterceptor$1.proceedWithInvocation(TransactionInterceptor.java:99)
	at org.springframework.transaction.interceptor.TransactionAspectSupport.invokeWithinTransaction(TransactionAspectSupport.java:282)
	at org.springframework.transaction.interceptor.TransactionInterceptor.invoke(TransactionInterceptor.java:96)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:179)
	at org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:673)
	at com.crossoverjie.kafka.orderconsumer.service.impl.OrderServiceImpl$$EnhancerBySpringCGLIB$$34c21228.createOptimisticOrderUseRedisAndKafka(<generated>)
	at com.crossoverjie.kafka.orderconsumer.kafka.ConsumerTask.dealMessage(ConsumerTask.java:100)
	at com.crossoverjie.kafka.orderconsumer.kafka.ConsumerTask.run(ConsumerTask.java:82)
	at java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:511)
	at java.util.concurrent.FutureTask.run(FutureTask.java:266)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at java.lang.Thread.run(Thread.java:748)
[2018-06-28 17:04:23.160] [consumer-pool-0] ERROR com.crossoverjie.kafka.orderconsumer.kafka.ConsumerTask consumer-pool-0, - unknown exception
java.lang.RuntimeException: 并发更新库存失败
	at com.crossoverjie.kafka.orderconsumer.service.impl.OrderServiceImpl.saleStockOptimisticByRedis(OrderServiceImpl.java:67)
	at com.crossoverjie.kafka.orderconsumer.service.impl.OrderServiceImpl.createOptimisticOrderUseRedisAndKafka(OrderServiceImpl.java:53)
	at com.crossoverjie.kafka.orderconsumer.service.impl.OrderServiceImpl$$FastClassBySpringCGLIB$$fc85889b.invoke(<generated>)
	at org.springframework.cglib.proxy.MethodProxy.invoke(MethodProxy.java:204)
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.invokeJoinpoint(CglibAopProxy.java:738)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:157)
	at org.springframework.transaction.interceptor.TransactionInterceptor$1.proceedWithInvocation(TransactionInterceptor.java:99)
	at org.springframework.transaction.interceptor.TransactionAspectSupport.invokeWithinTransaction(TransactionAspectSupport.java:282)
	at org.springframework.transaction.interceptor.TransactionInterceptor.invoke(TransactionInterceptor.java:96)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:179)
	at org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:673)
	at com.crossoverjie.kafka.orderconsumer.service.impl.OrderServiceImpl$$EnhancerBySpringCGLIB$$34c21228.createOptimisticOrderUseRedisAndKafka(<generated>)
	at com.crossoverjie.kafka.orderconsumer.kafka.ConsumerTask.dealMessage(ConsumerTask.java:100)
	at com.crossoverjie.kafka.orderconsumer.kafka.ConsumerTask.run(ConsumerTask.java:82)
	at java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:511)
	at java.util.concurrent.FutureTask.run(FutureTask.java:266)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at java.lang.Thread.run(Thread.java:748)
[2018-06-28 17:04:23.249] [consumer-pool-0] ERROR com.crossoverjie.kafka.orderconsumer.kafka.ConsumerTask consumer-pool-0, - unknown exception
java.lang.RuntimeException: 并发更新库存失败
	at com.crossoverjie.kafka.orderconsumer.service.impl.OrderServiceImpl.saleStockOptimisticByRedis(OrderServiceImpl.java:67)
	at com.crossoverjie.kafka.orderconsumer.service.impl.OrderServiceImpl.createOptimisticOrderUseRedisAndKafka(OrderServiceImpl.java:53)
	at com.crossoverjie.kafka.orderconsumer.service.impl.OrderServiceImpl$$FastClassBySpringCGLIB$$fc85889b.invoke(<generated>)
	at org.springframework.cglib.proxy.MethodProxy.invoke(MethodProxy.java:204)
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.invokeJoinpoint(CglibAopProxy.java:738)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:157)
	at org.springframework.transaction.interceptor.TransactionInterceptor$1.proceedWithInvocation(TransactionInterceptor.java:99)
	at org.springframework.transaction.interceptor.TransactionAspectSupport.invokeWithinTransaction(TransactionAspectSupport.java:282)
	at org.springframework.transaction.interceptor.TransactionInterceptor.invoke(TransactionInterceptor.java:96)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:179)
	at org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:673)
	at com.crossoverjie.kafka.orderconsumer.service.impl.OrderServiceImpl$$EnhancerBySpringCGLIB$$34c21228.createOptimisticOrderUseRedisAndKafka(<generated>)
	at com.crossoverjie.kafka.orderconsumer.kafka.ConsumerTask.dealMessage(ConsumerTask.java:100)
	at com.crossoverjie.kafka.orderconsumer.kafka.ConsumerTask.run(ConsumerTask.java:82)
	at java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:511)
	at java.util.concurrent.FutureTask.run(FutureTask.java:266)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at java.lang.Thread.run(Thread.java:748)
[2018-06-28 17:04:23.268] [consumer-pool-0] ERROR com.crossoverjie.kafka.orderconsumer.kafka.ConsumerTask consumer-pool-0, - unknown exception
java.lang.RuntimeException: 并发更新库存失败
	at com.crossoverjie.kafka.orderconsumer.service.impl.OrderServiceImpl.saleStockOptimisticByRedis(OrderServiceImpl.java:67)
	at com.crossoverjie.kafka.orderconsumer.service.impl.OrderServiceImpl.createOptimisticOrderUseRedisAndKafka(OrderServiceImpl.java:53)
	at com.crossoverjie.kafka.orderconsumer.service.impl.OrderServiceImpl$$FastClassBySpringCGLIB$$fc85889b.invoke(<generated>)
	at org.springframework.cglib.proxy.MethodProxy.invoke(MethodProxy.java:204)
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.invokeJoinpoint(CglibAopProxy.java:738)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:157)
	at org.springframework.transaction.interceptor.TransactionInterceptor$1.proceedWithInvocation(TransactionInterceptor.java:99)
	at org.springframework.transaction.interceptor.TransactionAspectSupport.invokeWithinTransaction(TransactionAspectSupport.java:282)
	at org.springframework.transaction.interceptor.TransactionInterceptor.invoke(TransactionInterceptor.java:96)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:179)
	at org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:673)
	at com.crossoverjie.kafka.orderconsumer.service.impl.OrderServiceImpl$$EnhancerBySpringCGLIB$$34c21228.createOptimisticOrderUseRedisAndKafka(<generated>)
	at com.crossoverjie.kafka.orderconsumer.kafka.ConsumerTask.dealMessage(ConsumerTask.java:100)
	at com.crossoverjie.kafka.orderconsumer.kafka.ConsumerTask.run(ConsumerTask.java:82)
	at java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:511)
	at java.util.concurrent.FutureTask.run(FutureTask.java:266)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at java.lang.Thread.run(Thread.java:748)
[2018-06-28 17:04:23.511] [consumer-pool-0] ERROR com.crossoverjie.kafka.orderconsumer.kafka.ConsumerTask consumer-pool-0, - unknown exception
java.lang.RuntimeException: 并发更新库存失败
	at com.crossoverjie.kafka.orderconsumer.service.impl.OrderServiceImpl.saleStockOptimisticByRedis(OrderServiceImpl.java:67)
	at com.crossoverjie.kafka.orderconsumer.service.impl.OrderServiceImpl.createOptimisticOrderUseRedisAndKafka(OrderServiceImpl.java:53)
	at com.crossoverjie.kafka.orderconsumer.service.impl.OrderServiceImpl$$FastClassBySpringCGLIB$$fc85889b.invoke(<generated>)
	at org.springframework.cglib.proxy.MethodProxy.invoke(MethodProxy.java:204)
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.invokeJoinpoint(CglibAopProxy.java:738)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:157)
	at org.springframework.transaction.interceptor.TransactionInterceptor$1.proceedWithInvocation(TransactionInterceptor.java:99)
	at org.springframework.transaction.interceptor.TransactionAspectSupport.invokeWithinTransaction(TransactionAspectSupport.java:282)
	at org.springframework.transaction.interceptor.TransactionInterceptor.invoke(TransactionInterceptor.java:96)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:179)
	at org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:673)
	at com.crossoverjie.kafka.orderconsumer.service.impl.OrderServiceImpl$$EnhancerBySpringCGLIB$$34c21228.createOptimisticOrderUseRedisAndKafka(<generated>)
	at com.crossoverjie.kafka.orderconsumer.kafka.ConsumerTask.dealMessage(ConsumerTask.java:100)
	at com.crossoverjie.kafka.orderconsumer.kafka.ConsumerTask.run(ConsumerTask.java:82)
	at java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:511)
	at java.util.concurrent.FutureTask.run(FutureTask.java:266)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at java.lang.Thread.run(Thread.java:748)
[2018-06-28 17:04:23.939] [consumer-pool-0] ERROR com.crossoverjie.kafka.orderconsumer.kafka.ConsumerTask consumer-pool-0, - unknown exception
java.lang.RuntimeException: 并发更新库存失败
	at com.crossoverjie.kafka.orderconsumer.service.impl.OrderServiceImpl.saleStockOptimisticByRedis(OrderServiceImpl.java:67)
	at com.crossoverjie.kafka.orderconsumer.service.impl.OrderServiceImpl.createOptimisticOrderUseRedisAndKafka(OrderServiceImpl.java:53)
	at com.crossoverjie.kafka.orderconsumer.service.impl.OrderServiceImpl$$FastClassBySpringCGLIB$$fc85889b.invoke(<generated>)
	at org.springframework.cglib.proxy.MethodProxy.invoke(MethodProxy.java:204)
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.invokeJoinpoint(CglibAopProxy.java:738)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:157)
	at org.springframework.transaction.interceptor.TransactionInterceptor$1.proceedWithInvocation(TransactionInterceptor.java:99)
	at org.springframework.transaction.interceptor.TransactionAspectSupport.invokeWithinTransaction(TransactionAspectSupport.java:282)
	at org.springframework.transaction.interceptor.TransactionInterceptor.invoke(TransactionInterceptor.java:96)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:179)
	at org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:673)
	at com.crossoverjie.kafka.orderconsumer.service.impl.OrderServiceImpl$$EnhancerBySpringCGLIB$$34c21228.createOptimisticOrderUseRedisAndKafka(<generated>)
	at com.crossoverjie.kafka.orderconsumer.kafka.ConsumerTask.dealMessage(ConsumerTask.java:100)
	at com.crossoverjie.kafka.orderconsumer.kafka.ConsumerTask.run(ConsumerTask.java:82)
	at java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:511)
	at java.util.concurrent.FutureTask.run(FutureTask.java:266)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at java.lang.Thread.run(Thread.java:748)
[2018-06-28 17:04:23.953] [consumer-pool-0] ERROR com.crossoverjie.kafka.orderconsumer.kafka.ConsumerTask consumer-pool-0, - unknown exception
java.lang.RuntimeException: 并发更新库存失败
	at com.crossoverjie.kafka.orderconsumer.service.impl.OrderServiceImpl.saleStockOptimisticByRedis(OrderServiceImpl.java:67)
	at com.crossoverjie.kafka.orderconsumer.service.impl.OrderServiceImpl.createOptimisticOrderUseRedisAndKafka(OrderServiceImpl.java:53)
	at com.crossoverjie.kafka.orderconsumer.service.impl.OrderServiceImpl$$FastClassBySpringCGLIB$$fc85889b.invoke(<generated>)
	at org.springframework.cglib.proxy.MethodProxy.invoke(MethodProxy.java:204)
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.invokeJoinpoint(CglibAopProxy.java:738)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:157)
	at org.springframework.transaction.interceptor.TransactionInterceptor$1.proceedWithInvocation(TransactionInterceptor.java:99)
	at org.springframework.transaction.interceptor.TransactionAspectSupport.invokeWithinTransaction(TransactionAspectSupport.java:282)
	at org.springframework.transaction.interceptor.TransactionInterceptor.invoke(TransactionInterceptor.java:96)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:179)
	at org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:673)
	at com.crossoverjie.kafka.orderconsumer.service.impl.OrderServiceImpl$$EnhancerBySpringCGLIB$$34c21228.createOptimisticOrderUseRedisAndKafka(<generated>)
	at com.crossoverjie.kafka.orderconsumer.kafka.ConsumerTask.dealMessage(ConsumerTask.java:100)
	at com.crossoverjie.kafka.orderconsumer.kafka.ConsumerTask.run(ConsumerTask.java:82)
	at java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:511)
	at java.util.concurrent.FutureTask.run(FutureTask.java:266)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at java.lang.Thread.run(Thread.java:748)
[2018-06-28 17:04:23.961] [consumer-pool-0] ERROR com.crossoverjie.kafka.orderconsumer.kafka.ConsumerTask consumer-pool-0, - unknown exception
java.lang.RuntimeException: 并发更新库存失败
	at com.crossoverjie.kafka.orderconsumer.service.impl.OrderServiceImpl.saleStockOptimisticByRedis(OrderServiceImpl.java:67)
	at com.crossoverjie.kafka.orderconsumer.service.impl.OrderServiceImpl.createOptimisticOrderUseRedisAndKafka(OrderServiceImpl.java:53)
	at com.crossoverjie.kafka.orderconsumer.service.impl.OrderServiceImpl$$FastClassBySpringCGLIB$$fc85889b.invoke(<generated>)
	at org.springframework.cglib.proxy.MethodProxy.invoke(MethodProxy.java:204)
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.invokeJoinpoint(CglibAopProxy.java:738)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:157)
	at org.springframework.transaction.interceptor.TransactionInterceptor$1.proceedWithInvocation(TransactionInterceptor.java:99)
	at org.springframework.transaction.interceptor.TransactionAspectSupport.invokeWithinTransaction(TransactionAspectSupport.java:282)
	at org.springframework.transaction.interceptor.TransactionInterceptor.invoke(TransactionInterceptor.java:96)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:179)
	at org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:673)
	at com.crossoverjie.kafka.orderconsumer.service.impl.OrderServiceImpl$$EnhancerBySpringCGLIB$$34c21228.createOptimisticOrderUseRedisAndKafka(<generated>)
	at com.crossoverjie.kafka.orderconsumer.kafka.ConsumerTask.dealMessage(ConsumerTask.java:100)
	at com.crossoverjie.kafka.orderconsumer.kafka.ConsumerTask.run(ConsumerTask.java:82)
	at java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:511)
	at java.util.concurrent.FutureTask.run(FutureTask.java:266)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at java.lang.Thread.run(Thread.java:748)
[2018-06-28 17:04:23.980] [consumer-pool-0] ERROR com.crossoverjie.kafka.orderconsumer.kafka.ConsumerTask consumer-pool-0, - unknown exception
java.lang.RuntimeException: 并发更新库存失败
	at com.crossoverjie.kafka.orderconsumer.service.impl.OrderServiceImpl.saleStockOptimisticByRedis(OrderServiceImpl.java:67)
	at com.crossoverjie.kafka.orderconsumer.service.impl.OrderServiceImpl.createOptimisticOrderUseRedisAndKafka(OrderServiceImpl.java:53)
	at com.crossoverjie.kafka.orderconsumer.service.impl.OrderServiceImpl$$FastClassBySpringCGLIB$$fc85889b.invoke(<generated>)
	at org.springframework.cglib.proxy.MethodProxy.invoke(MethodProxy.java:204)
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.invokeJoinpoint(CglibAopProxy.java:738)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:157)
	at org.springframework.transaction.interceptor.TransactionInterceptor$1.proceedWithInvocation(TransactionInterceptor.java:99)
	at org.springframework.transaction.interceptor.TransactionAspectSupport.invokeWithinTransaction(TransactionAspectSupport.java:282)
	at org.springframework.transaction.interceptor.TransactionInterceptor.invoke(TransactionInterceptor.java:96)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:179)
	at org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:673)
	at com.crossoverjie.kafka.orderconsumer.service.impl.OrderServiceImpl$$EnhancerBySpringCGLIB$$34c21228.createOptimisticOrderUseRedisAndKafka(<generated>)
	at com.crossoverjie.kafka.orderconsumer.kafka.ConsumerTask.dealMessage(ConsumerTask.java:100)
	at com.crossoverjie.kafka.orderconsumer.kafka.ConsumerTask.run(ConsumerTask.java:82)
	at java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:511)
	at java.util.concurrent.FutureTask.run(FutureTask.java:266)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at java.lang.Thread.run(Thread.java:748)
[2018-06-28 17:04:23.985] [consumer-pool-0] ERROR com.crossoverjie.kafka.orderconsumer.kafka.ConsumerTask consumer-pool-0, - unknown exception
java.lang.RuntimeException: 并发更新库存失败
	at com.crossoverjie.kafka.orderconsumer.service.impl.OrderServiceImpl.saleStockOptimisticByRedis(OrderServiceImpl.java:67)
	at com.crossoverjie.kafka.orderconsumer.service.impl.OrderServiceImpl.createOptimisticOrderUseRedisAndKafka(OrderServiceImpl.java:53)
	at com.crossoverjie.kafka.orderconsumer.service.impl.OrderServiceImpl$$FastClassBySpringCGLIB$$fc85889b.invoke(<generated>)
	at org.springframework.cglib.proxy.MethodProxy.invoke(MethodProxy.java:204)
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.invokeJoinpoint(CglibAopProxy.java:738)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:157)
	at org.springframework.transaction.interceptor.TransactionInterceptor$1.proceedWithInvocation(TransactionInterceptor.java:99)
	at org.springframework.transaction.interceptor.TransactionAspectSupport.invokeWithinTransaction(TransactionAspectSupport.java:282)
	at org.springframework.transaction.interceptor.TransactionInterceptor.invoke(TransactionInterceptor.java:96)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:179)
	at org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:673)
	at com.crossoverjie.kafka.orderconsumer.service.impl.OrderServiceImpl$$EnhancerBySpringCGLIB$$34c21228.createOptimisticOrderUseRedisAndKafka(<generated>)
	at com.crossoverjie.kafka.orderconsumer.kafka.ConsumerTask.dealMessage(ConsumerTask.java:100)
	at com.crossoverjie.kafka.orderconsumer.kafka.ConsumerTask.run(ConsumerTask.java:82)
	at java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:511)
	at java.util.concurrent.FutureTask.run(FutureTask.java:266)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at java.lang.Thread.run(Thread.java:748)
[2018-06-28 17:04:23.991] [consumer-pool-0] ERROR com.crossoverjie.kafka.orderconsumer.kafka.ConsumerTask consumer-pool-0, - unknown exception
java.lang.RuntimeException: 并发更新库存失败
	at com.crossoverjie.kafka.orderconsumer.service.impl.OrderServiceImpl.saleStockOptimisticByRedis(OrderServiceImpl.java:67)
	at com.crossoverjie.kafka.orderconsumer.service.impl.OrderServiceImpl.createOptimisticOrderUseRedisAndKafka(OrderServiceImpl.java:53)
	at com.crossoverjie.kafka.orderconsumer.service.impl.OrderServiceImpl$$FastClassBySpringCGLIB$$fc85889b.invoke(<generated>)
	at org.springframework.cglib.proxy.MethodProxy.invoke(MethodProxy.java:204)
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.invokeJoinpoint(CglibAopProxy.java:738)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:157)
	at org.springframework.transaction.interceptor.TransactionInterceptor$1.proceedWithInvocation(TransactionInterceptor.java:99)
	at org.springframework.transaction.interceptor.TransactionAspectSupport.invokeWithinTransaction(TransactionAspectSupport.java:282)
	at org.springframework.transaction.interceptor.TransactionInterceptor.invoke(TransactionInterceptor.java:96)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:179)
	at org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:673)
	at com.crossoverjie.kafka.orderconsumer.service.impl.OrderServiceImpl$$EnhancerBySpringCGLIB$$34c21228.createOptimisticOrderUseRedisAndKafka(<generated>)
	at com.crossoverjie.kafka.orderconsumer.kafka.ConsumerTask.dealMessage(ConsumerTask.java:100)
	at com.crossoverjie.kafka.orderconsumer.kafka.ConsumerTask.run(ConsumerTask.java:82)
	at java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:511)
	at java.util.concurrent.FutureTask.run(FutureTask.java:266)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at java.lang.Thread.run(Thread.java:748)
[2018-06-28 17:04:24.005] [consumer-pool-0] ERROR com.crossoverjie.kafka.orderconsumer.kafka.ConsumerTask consumer-pool-0, - unknown exception
java.lang.RuntimeException: 并发更新库存失败
	at com.crossoverjie.kafka.orderconsumer.service.impl.OrderServiceImpl.saleStockOptimisticByRedis(OrderServiceImpl.java:67)
	at com.crossoverjie.kafka.orderconsumer.service.impl.OrderServiceImpl.createOptimisticOrderUseRedisAndKafka(OrderServiceImpl.java:53)
	at com.crossoverjie.kafka.orderconsumer.service.impl.OrderServiceImpl$$FastClassBySpringCGLIB$$fc85889b.invoke(<generated>)
	at org.springframework.cglib.proxy.MethodProxy.invoke(MethodProxy.java:204)
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.invokeJoinpoint(CglibAopProxy.java:738)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:157)
	at org.springframework.transaction.interceptor.TransactionInterceptor$1.proceedWithInvocation(TransactionInterceptor.java:99)
	at org.springframework.transaction.interceptor.TransactionAspectSupport.invokeWithinTransaction(TransactionAspectSupport.java:282)
	at org.springframework.transaction.interceptor.TransactionInterceptor.invoke(TransactionInterceptor.java:96)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:179)
	at org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:673)
	at com.crossoverjie.kafka.orderconsumer.service.impl.OrderServiceImpl$$EnhancerBySpringCGLIB$$34c21228.createOptimisticOrderUseRedisAndKafka(<generated>)
	at com.crossoverjie.kafka.orderconsumer.kafka.ConsumerTask.dealMessage(ConsumerTask.java:100)
	at com.crossoverjie.kafka.orderconsumer.kafka.ConsumerTask.run(ConsumerTask.java:82)
	at java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:511)
	at java.util.concurrent.FutureTask.run(FutureTask.java:266)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at java.lang.Thread.run(Thread.java:748)
[2018-06-28 17:04:24.011] [consumer-pool-0] ERROR com.crossoverjie.kafka.orderconsumer.kafka.ConsumerTask consumer-pool-0, - unknown exception
java.lang.RuntimeException: 并发更新库存失败
	at com.crossoverjie.kafka.orderconsumer.service.impl.OrderServiceImpl.saleStockOptimisticByRedis(OrderServiceImpl.java:67)
	at com.crossoverjie.kafka.orderconsumer.service.impl.OrderServiceImpl.createOptimisticOrderUseRedisAndKafka(OrderServiceImpl.java:53)
	at com.crossoverjie.kafka.orderconsumer.service.impl.OrderServiceImpl$$FastClassBySpringCGLIB$$fc85889b.invoke(<generated>)
	at org.springframework.cglib.proxy.MethodProxy.invoke(MethodProxy.java:204)
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.invokeJoinpoint(CglibAopProxy.java:738)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:157)
	at org.springframework.transaction.interceptor.TransactionInterceptor$1.proceedWithInvocation(TransactionInterceptor.java:99)
	at org.springframework.transaction.interceptor.TransactionAspectSupport.invokeWithinTransaction(TransactionAspectSupport.java:282)
	at org.springframework.transaction.interceptor.TransactionInterceptor.invoke(TransactionInterceptor.java:96)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:179)
	at org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:673)
	at com.crossoverjie.kafka.orderconsumer.service.impl.OrderServiceImpl$$EnhancerBySpringCGLIB$$34c21228.createOptimisticOrderUseRedisAndKafka(<generated>)
	at com.crossoverjie.kafka.orderconsumer.kafka.ConsumerTask.dealMessage(ConsumerTask.java:100)
	at com.crossoverjie.kafka.orderconsumer.kafka.ConsumerTask.run(ConsumerTask.java:82)
	at java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:511)
	at java.util.concurrent.FutureTask.run(FutureTask.java:266)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at java.lang.Thread.run(Thread.java:748)
[2018-06-28 17:04:24.027] [consumer-pool-0] ERROR com.crossoverjie.kafka.orderconsumer.kafka.ConsumerTask consumer-pool-0, - unknown exception
java.lang.RuntimeException: 并发更新库存失败
	at com.crossoverjie.kafka.orderconsumer.service.impl.OrderServiceImpl.saleStockOptimisticByRedis(OrderServiceImpl.java:67)
	at com.crossoverjie.kafka.orderconsumer.service.impl.OrderServiceImpl.createOptimisticOrderUseRedisAndKafka(OrderServiceImpl.java:53)
	at com.crossoverjie.kafka.orderconsumer.service.impl.OrderServiceImpl$$FastClassBySpringCGLIB$$fc85889b.invoke(<generated>)
	at org.springframework.cglib.proxy.MethodProxy.invoke(MethodProxy.java:204)
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.invokeJoinpoint(CglibAopProxy.java:738)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:157)
	at org.springframework.transaction.interceptor.TransactionInterceptor$1.proceedWithInvocation(TransactionInterceptor.java:99)
	at org.springframework.transaction.interceptor.TransactionAspectSupport.invokeWithinTransaction(TransactionAspectSupport.java:282)
	at org.springframework.transaction.interceptor.TransactionInterceptor.invoke(TransactionInterceptor.java:96)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:179)
	at org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:673)
	at com.crossoverjie.kafka.orderconsumer.service.impl.OrderServiceImpl$$EnhancerBySpringCGLIB$$34c21228.createOptimisticOrderUseRedisAndKafka(<generated>)
	at com.crossoverjie.kafka.orderconsumer.kafka.ConsumerTask.dealMessage(ConsumerTask.java:100)
	at com.crossoverjie.kafka.orderconsumer.kafka.ConsumerTask.run(ConsumerTask.java:82)
	at java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:511)
	at java.util.concurrent.FutureTask.run(FutureTask.java:266)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at java.lang.Thread.run(Thread.java:748)
[2018-06-28 17:04:24.033] [consumer-pool-0] ERROR com.crossoverjie.kafka.orderconsumer.kafka.ConsumerTask consumer-pool-0, - unknown exception
java.lang.RuntimeException: 并发更新库存失败
	at com.crossoverjie.kafka.orderconsumer.service.impl.OrderServiceImpl.saleStockOptimisticByRedis(OrderServiceImpl.java:67)
	at com.crossoverjie.kafka.orderconsumer.service.impl.OrderServiceImpl.createOptimisticOrderUseRedisAndKafka(OrderServiceImpl.java:53)
	at com.crossoverjie.kafka.orderconsumer.service.impl.OrderServiceImpl$$FastClassBySpringCGLIB$$fc85889b.invoke(<generated>)
	at org.springframework.cglib.proxy.MethodProxy.invoke(MethodProxy.java:204)
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.invokeJoinpoint(CglibAopProxy.java:738)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:157)
	at org.springframework.transaction.interceptor.TransactionInterceptor$1.proceedWithInvocation(TransactionInterceptor.java:99)
	at org.springframework.transaction.interceptor.TransactionAspectSupport.invokeWithinTransaction(TransactionAspectSupport.java:282)
	at org.springframework.transaction.interceptor.TransactionInterceptor.invoke(TransactionInterceptor.java:96)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:179)
	at org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:673)
	at com.crossoverjie.kafka.orderconsumer.service.impl.OrderServiceImpl$$EnhancerBySpringCGLIB$$34c21228.createOptimisticOrderUseRedisAndKafka(<generated>)
	at com.crossoverjie.kafka.orderconsumer.kafka.ConsumerTask.dealMessage(ConsumerTask.java:100)
	at com.crossoverjie.kafka.orderconsumer.kafka.ConsumerTask.run(ConsumerTask.java:82)
	at java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:511)
	at java.util.concurrent.FutureTask.run(FutureTask.java:266)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at java.lang.Thread.run(Thread.java:748)
[2018-06-28 17:04:24.047] [consumer-pool-0] ERROR com.crossoverjie.kafka.orderconsumer.kafka.ConsumerTask consumer-pool-0, - unknown exception
java.lang.RuntimeException: 并发更新库存失败
	at com.crossoverjie.kafka.orderconsumer.service.impl.OrderServiceImpl.saleStockOptimisticByRedis(OrderServiceImpl.java:67)
	at com.crossoverjie.kafka.orderconsumer.service.impl.OrderServiceImpl.createOptimisticOrderUseRedisAndKafka(OrderServiceImpl.java:53)
	at com.crossoverjie.kafka.orderconsumer.service.impl.OrderServiceImpl$$FastClassBySpringCGLIB$$fc85889b.invoke(<generated>)
	at org.springframework.cglib.proxy.MethodProxy.invoke(MethodProxy.java:204)
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.invokeJoinpoint(CglibAopProxy.java:738)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:157)
	at org.springframework.transaction.interceptor.TransactionInterceptor$1.proceedWithInvocation(TransactionInterceptor.java:99)
	at org.springframework.transaction.interceptor.TransactionAspectSupport.invokeWithinTransaction(TransactionAspectSupport.java:282)
	at org.springframework.transaction.interceptor.TransactionInterceptor.invoke(TransactionInterceptor.java:96)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:179)
	at org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:673)
	at com.crossoverjie.kafka.orderconsumer.service.impl.OrderServiceImpl$$EnhancerBySpringCGLIB$$34c21228.createOptimisticOrderUseRedisAndKafka(<generated>)
	at com.crossoverjie.kafka.orderconsumer.kafka.ConsumerTask.dealMessage(ConsumerTask.java:100)
	at com.crossoverjie.kafka.orderconsumer.kafka.ConsumerTask.run(ConsumerTask.java:82)
	at java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:511)
	at java.util.concurrent.FutureTask.run(FutureTask.java:266)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at java.lang.Thread.run(Thread.java:748)
[2018-06-28 17:04:24.053] [consumer-pool-0] ERROR com.crossoverjie.kafka.orderconsumer.kafka.ConsumerTask consumer-pool-0, - unknown exception
java.lang.RuntimeException: 并发更新库存失败
	at com.crossoverjie.kafka.orderconsumer.service.impl.OrderServiceImpl.saleStockOptimisticByRedis(OrderServiceImpl.java:67)
	at com.crossoverjie.kafka.orderconsumer.service.impl.OrderServiceImpl.createOptimisticOrderUseRedisAndKafka(OrderServiceImpl.java:53)
	at com.crossoverjie.kafka.orderconsumer.service.impl.OrderServiceImpl$$FastClassBySpringCGLIB$$fc85889b.invoke(<generated>)
	at org.springframework.cglib.proxy.MethodProxy.invoke(MethodProxy.java:204)
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.invokeJoinpoint(CglibAopProxy.java:738)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:157)
	at org.springframework.transaction.interceptor.TransactionInterceptor$1.proceedWithInvocation(TransactionInterceptor.java:99)
	at org.springframework.transaction.interceptor.TransactionAspectSupport.invokeWithinTransaction(TransactionAspectSupport.java:282)
	at org.springframework.transaction.interceptor.TransactionInterceptor.invoke(TransactionInterceptor.java:96)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:179)
	at org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:673)
	at com.crossoverjie.kafka.orderconsumer.service.impl.OrderServiceImpl$$EnhancerBySpringCGLIB$$34c21228.createOptimisticOrderUseRedisAndKafka(<generated>)
	at com.crossoverjie.kafka.orderconsumer.kafka.ConsumerTask.dealMessage(ConsumerTask.java:100)
	at com.crossoverjie.kafka.orderconsumer.kafka.ConsumerTask.run(ConsumerTask.java:82)
	at java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:511)
	at java.util.concurrent.FutureTask.run(FutureTask.java:266)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at java.lang.Thread.run(Thread.java:748)
[2018-06-28 17:04:24.188] [consumer-pool-0] ERROR com.crossoverjie.kafka.orderconsumer.kafka.ConsumerTask consumer-pool-0, - unknown exception
java.lang.RuntimeException: 并发更新库存失败
	at com.crossoverjie.kafka.orderconsumer.service.impl.OrderServiceImpl.saleStockOptimisticByRedis(OrderServiceImpl.java:67)
	at com.crossoverjie.kafka.orderconsumer.service.impl.OrderServiceImpl.createOptimisticOrderUseRedisAndKafka(OrderServiceImpl.java:53)
	at com.crossoverjie.kafka.orderconsumer.service.impl.OrderServiceImpl$$FastClassBySpringCGLIB$$fc85889b.invoke(<generated>)
	at org.springframework.cglib.proxy.MethodProxy.invoke(MethodProxy.java:204)
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.invokeJoinpoint(CglibAopProxy.java:738)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:157)
	at org.springframework.transaction.interceptor.TransactionInterceptor$1.proceedWithInvocation(TransactionInterceptor.java:99)
	at org.springframework.transaction.interceptor.TransactionAspectSupport.invokeWithinTransaction(TransactionAspectSupport.java:282)
	at org.springframework.transaction.interceptor.TransactionInterceptor.invoke(TransactionInterceptor.java:96)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:179)
	at org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:673)
	at com.crossoverjie.kafka.orderconsumer.service.impl.OrderServiceImpl$$EnhancerBySpringCGLIB$$34c21228.createOptimisticOrderUseRedisAndKafka(<generated>)
	at com.crossoverjie.kafka.orderconsumer.kafka.ConsumerTask.dealMessage(ConsumerTask.java:100)
	at com.crossoverjie.kafka.orderconsumer.kafka.ConsumerTask.run(ConsumerTask.java:82)
	at java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:511)
	at java.util.concurrent.FutureTask.run(FutureTask.java:266)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at java.lang.Thread.run(Thread.java:748)
[2018-06-28 17:04:24.200] [consumer-pool-0] ERROR com.crossoverjie.kafka.orderconsumer.kafka.ConsumerTask consumer-pool-0, - unknown exception
java.lang.RuntimeException: 并发更新库存失败
	at com.crossoverjie.kafka.orderconsumer.service.impl.OrderServiceImpl.saleStockOptimisticByRedis(OrderServiceImpl.java:67)
	at com.crossoverjie.kafka.orderconsumer.service.impl.OrderServiceImpl.createOptimisticOrderUseRedisAndKafka(OrderServiceImpl.java:53)
	at com.crossoverjie.kafka.orderconsumer.service.impl.OrderServiceImpl$$FastClassBySpringCGLIB$$fc85889b.invoke(<generated>)
	at org.springframework.cglib.proxy.MethodProxy.invoke(MethodProxy.java:204)
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.invokeJoinpoint(CglibAopProxy.java:738)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:157)
	at org.springframework.transaction.interceptor.TransactionInterceptor$1.proceedWithInvocation(TransactionInterceptor.java:99)
	at org.springframework.transaction.interceptor.TransactionAspectSupport.invokeWithinTransaction(TransactionAspectSupport.java:282)
	at org.springframework.transaction.interceptor.TransactionInterceptor.invoke(TransactionInterceptor.java:96)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:179)
	at org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:673)
	at com.crossoverjie.kafka.orderconsumer.service.impl.OrderServiceImpl$$EnhancerBySpringCGLIB$$34c21228.createOptimisticOrderUseRedisAndKafka(<generated>)
	at com.crossoverjie.kafka.orderconsumer.kafka.ConsumerTask.dealMessage(ConsumerTask.java:100)
	at com.crossoverjie.kafka.orderconsumer.kafka.ConsumerTask.run(ConsumerTask.java:82)
	at java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:511)
	at java.util.concurrent.FutureTask.run(FutureTask.java:266)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at java.lang.Thread.run(Thread.java:748)
[2018-06-28 17:04:24.208] [consumer-pool-0] ERROR com.crossoverjie.kafka.orderconsumer.kafka.ConsumerTask consumer-pool-0, - unknown exception
java.lang.RuntimeException: 并发更新库存失败
	at com.crossoverjie.kafka.orderconsumer.service.impl.OrderServiceImpl.saleStockOptimisticByRedis(OrderServiceImpl.java:67)
	at com.crossoverjie.kafka.orderconsumer.service.impl.OrderServiceImpl.createOptimisticOrderUseRedisAndKafka(OrderServiceImpl.java:53)
	at com.crossoverjie.kafka.orderconsumer.service.impl.OrderServiceImpl$$FastClassBySpringCGLIB$$fc85889b.invoke(<generated>)
	at org.springframework.cglib.proxy.MethodProxy.invoke(MethodProxy.java:204)
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.invokeJoinpoint(CglibAopProxy.java:738)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:157)
	at org.springframework.transaction.interceptor.TransactionInterceptor$1.proceedWithInvocation(TransactionInterceptor.java:99)
	at org.springframework.transaction.interceptor.TransactionAspectSupport.invokeWithinTransaction(TransactionAspectSupport.java:282)
	at org.springframework.transaction.interceptor.TransactionInterceptor.invoke(TransactionInterceptor.java:96)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:179)
	at org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:673)
	at com.crossoverjie.kafka.orderconsumer.service.impl.OrderServiceImpl$$EnhancerBySpringCGLIB$$34c21228.createOptimisticOrderUseRedisAndKafka(<generated>)
	at com.crossoverjie.kafka.orderconsumer.kafka.ConsumerTask.dealMessage(ConsumerTask.java:100)
	at com.crossoverjie.kafka.orderconsumer.kafka.ConsumerTask.run(ConsumerTask.java:82)
	at java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:511)
	at java.util.concurrent.FutureTask.run(FutureTask.java:266)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at java.lang.Thread.run(Thread.java:748)
[2018-06-28 17:04:24.215] [consumer-pool-0] ERROR com.crossoverjie.kafka.orderconsumer.kafka.ConsumerTask consumer-pool-0, - unknown exception
java.lang.RuntimeException: 并发更新库存失败
	at com.crossoverjie.kafka.orderconsumer.service.impl.OrderServiceImpl.saleStockOptimisticByRedis(OrderServiceImpl.java:67)
	at com.crossoverjie.kafka.orderconsumer.service.impl.OrderServiceImpl.createOptimisticOrderUseRedisAndKafka(OrderServiceImpl.java:53)
	at com.crossoverjie.kafka.orderconsumer.service.impl.OrderServiceImpl$$FastClassBySpringCGLIB$$fc85889b.invoke(<generated>)
	at org.springframework.cglib.proxy.MethodProxy.invoke(MethodProxy.java:204)
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.invokeJoinpoint(CglibAopProxy.java:738)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:157)
	at org.springframework.transaction.interceptor.TransactionInterceptor$1.proceedWithInvocation(TransactionInterceptor.java:99)
	at org.springframework.transaction.interceptor.TransactionAspectSupport.invokeWithinTransaction(TransactionAspectSupport.java:282)
	at org.springframework.transaction.interceptor.TransactionInterceptor.invoke(TransactionInterceptor.java:96)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:179)
	at org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:673)
	at com.crossoverjie.kafka.orderconsumer.service.impl.OrderServiceImpl$$EnhancerBySpringCGLIB$$34c21228.createOptimisticOrderUseRedisAndKafka(<generated>)
	at com.crossoverjie.kafka.orderconsumer.kafka.ConsumerTask.dealMessage(ConsumerTask.java:100)
	at com.crossoverjie.kafka.orderconsumer.kafka.ConsumerTask.run(ConsumerTask.java:82)
	at java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:511)
	at java.util.concurrent.FutureTask.run(FutureTask.java:266)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at java.lang.Thread.run(Thread.java:748)
[2018-06-28 17:04:24.220] [consumer-pool-0] ERROR com.crossoverjie.kafka.orderconsumer.kafka.ConsumerTask consumer-pool-0, - unknown exception
java.lang.RuntimeException: 并发更新库存失败
	at com.crossoverjie.kafka.orderconsumer.service.impl.OrderServiceImpl.saleStockOptimisticByRedis(OrderServiceImpl.java:67)
	at com.crossoverjie.kafka.orderconsumer.service.impl.OrderServiceImpl.createOptimisticOrderUseRedisAndKafka(OrderServiceImpl.java:53)
	at com.crossoverjie.kafka.orderconsumer.service.impl.OrderServiceImpl$$FastClassBySpringCGLIB$$fc85889b.invoke(<generated>)
	at org.springframework.cglib.proxy.MethodProxy.invoke(MethodProxy.java:204)
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.invokeJoinpoint(CglibAopProxy.java:738)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:157)
	at org.springframework.transaction.interceptor.TransactionInterceptor$1.proceedWithInvocation(TransactionInterceptor.java:99)
	at org.springframework.transaction.interceptor.TransactionAspectSupport.invokeWithinTransaction(TransactionAspectSupport.java:282)
	at org.springframework.transaction.interceptor.TransactionInterceptor.invoke(TransactionInterceptor.java:96)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:179)
	at org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:673)
	at com.crossoverjie.kafka.orderconsumer.service.impl.OrderServiceImpl$$EnhancerBySpringCGLIB$$34c21228.createOptimisticOrderUseRedisAndKafka(<generated>)
	at com.crossoverjie.kafka.orderconsumer.kafka.ConsumerTask.dealMessage(ConsumerTask.java:100)
	at com.crossoverjie.kafka.orderconsumer.kafka.ConsumerTask.run(ConsumerTask.java:82)
	at java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:511)
	at java.util.concurrent.FutureTask.run(FutureTask.java:266)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at java.lang.Thread.run(Thread.java:748)
[2018-06-28 17:04:24.224] [consumer-pool-0] ERROR com.crossoverjie.kafka.orderconsumer.kafka.ConsumerTask consumer-pool-0, - unknown exception
java.lang.RuntimeException: 并发更新库存失败
	at com.crossoverjie.kafka.orderconsumer.service.impl.OrderServiceImpl.saleStockOptimisticByRedis(OrderServiceImpl.java:67)
	at com.crossoverjie.kafka.orderconsumer.service.impl.OrderServiceImpl.createOptimisticOrderUseRedisAndKafka(OrderServiceImpl.java:53)
	at com.crossoverjie.kafka.orderconsumer.service.impl.OrderServiceImpl$$FastClassBySpringCGLIB$$fc85889b.invoke(<generated>)
	at org.springframework.cglib.proxy.MethodProxy.invoke(MethodProxy.java:204)
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.invokeJoinpoint(CglibAopProxy.java:738)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:157)
	at org.springframework.transaction.interceptor.TransactionInterceptor$1.proceedWithInvocation(TransactionInterceptor.java:99)
	at org.springframework.transaction.interceptor.TransactionAspectSupport.invokeWithinTransaction(TransactionAspectSupport.java:282)
	at org.springframework.transaction.interceptor.TransactionInterceptor.invoke(TransactionInterceptor.java:96)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:179)
	at org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:673)
	at com.crossoverjie.kafka.orderconsumer.service.impl.OrderServiceImpl$$EnhancerBySpringCGLIB$$34c21228.createOptimisticOrderUseRedisAndKafka(<generated>)
	at com.crossoverjie.kafka.orderconsumer.kafka.ConsumerTask.dealMessage(ConsumerTask.java:100)
	at com.crossoverjie.kafka.orderconsumer.kafka.ConsumerTask.run(ConsumerTask.java:82)
	at java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:511)
	at java.util.concurrent.FutureTask.run(FutureTask.java:266)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at java.lang.Thread.run(Thread.java:748)
[2018-06-28 17:04:24.228] [consumer-pool-0] ERROR com.crossoverjie.kafka.orderconsumer.kafka.ConsumerTask consumer-pool-0, - unknown exception
java.lang.RuntimeException: 并发更新库存失败
	at com.crossoverjie.kafka.orderconsumer.service.impl.OrderServiceImpl.saleStockOptimisticByRedis(OrderServiceImpl.java:67)
	at com.crossoverjie.kafka.orderconsumer.service.impl.OrderServiceImpl.createOptimisticOrderUseRedisAndKafka(OrderServiceImpl.java:53)
	at com.crossoverjie.kafka.orderconsumer.service.impl.OrderServiceImpl$$FastClassBySpringCGLIB$$fc85889b.invoke(<generated>)
	at org.springframework.cglib.proxy.MethodProxy.invoke(MethodProxy.java:204)
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.invokeJoinpoint(CglibAopProxy.java:738)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:157)
	at org.springframework.transaction.interceptor.TransactionInterceptor$1.proceedWithInvocation(TransactionInterceptor.java:99)
	at org.springframework.transaction.interceptor.TransactionAspectSupport.invokeWithinTransaction(TransactionAspectSupport.java:282)
	at org.springframework.transaction.interceptor.TransactionInterceptor.invoke(TransactionInterceptor.java:96)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:179)
	at org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:673)
	at com.crossoverjie.kafka.orderconsumer.service.impl.OrderServiceImpl$$EnhancerBySpringCGLIB$$34c21228.createOptimisticOrderUseRedisAndKafka(<generated>)
	at com.crossoverjie.kafka.orderconsumer.kafka.ConsumerTask.dealMessage(ConsumerTask.java:100)
	at com.crossoverjie.kafka.orderconsumer.kafka.ConsumerTask.run(ConsumerTask.java:82)
	at java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:511)
	at java.util.concurrent.FutureTask.run(FutureTask.java:266)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at java.lang.Thread.run(Thread.java:748)
[2018-06-28 17:04:24.233] [consumer-pool-0] ERROR com.crossoverjie.kafka.orderconsumer.kafka.ConsumerTask consumer-pool-0, - unknown exception
java.lang.RuntimeException: 并发更新库存失败
	at com.crossoverjie.kafka.orderconsumer.service.impl.OrderServiceImpl.saleStockOptimisticByRedis(OrderServiceImpl.java:67)
	at com.crossoverjie.kafka.orderconsumer.service.impl.OrderServiceImpl.createOptimisticOrderUseRedisAndKafka(OrderServiceImpl.java:53)
	at com.crossoverjie.kafka.orderconsumer.service.impl.OrderServiceImpl$$FastClassBySpringCGLIB$$fc85889b.invoke(<generated>)
	at org.springframework.cglib.proxy.MethodProxy.invoke(MethodProxy.java:204)
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.invokeJoinpoint(CglibAopProxy.java:738)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:157)
	at org.springframework.transaction.interceptor.TransactionInterceptor$1.proceedWithInvocation(TransactionInterceptor.java:99)
	at org.springframework.transaction.interceptor.TransactionAspectSupport.invokeWithinTransaction(TransactionAspectSupport.java:282)
	at org.springframework.transaction.interceptor.TransactionInterceptor.invoke(TransactionInterceptor.java:96)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:179)
	at org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:673)
	at com.crossoverjie.kafka.orderconsumer.service.impl.OrderServiceImpl$$EnhancerBySpringCGLIB$$34c21228.createOptimisticOrderUseRedisAndKafka(<generated>)
	at com.crossoverjie.kafka.orderconsumer.kafka.ConsumerTask.dealMessage(ConsumerTask.java:100)
	at com.crossoverjie.kafka.orderconsumer.kafka.ConsumerTask.run(ConsumerTask.java:82)
	at java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:511)
	at java.util.concurrent.FutureTask.run(FutureTask.java:266)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at java.lang.Thread.run(Thread.java:748)
[2018-06-28 17:04:24.237] [consumer-pool-0] ERROR com.crossoverjie.kafka.orderconsumer.kafka.ConsumerTask consumer-pool-0, - unknown exception
java.lang.RuntimeException: 并发更新库存失败
	at com.crossoverjie.kafka.orderconsumer.service.impl.OrderServiceImpl.saleStockOptimisticByRedis(OrderServiceImpl.java:67)
	at com.crossoverjie.kafka.orderconsumer.service.impl.OrderServiceImpl.createOptimisticOrderUseRedisAndKafka(OrderServiceImpl.java:53)
	at com.crossoverjie.kafka.orderconsumer.service.impl.OrderServiceImpl$$FastClassBySpringCGLIB$$fc85889b.invoke(<generated>)
	at org.springframework.cglib.proxy.MethodProxy.invoke(MethodProxy.java:204)
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.invokeJoinpoint(CglibAopProxy.java:738)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:157)
	at org.springframework.transaction.interceptor.TransactionInterceptor$1.proceedWithInvocation(TransactionInterceptor.java:99)
	at org.springframework.transaction.interceptor.TransactionAspectSupport.invokeWithinTransaction(TransactionAspectSupport.java:282)
	at org.springframework.transaction.interceptor.TransactionInterceptor.invoke(TransactionInterceptor.java:96)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:179)
	at org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:673)
	at com.crossoverjie.kafka.orderconsumer.service.impl.OrderServiceImpl$$EnhancerBySpringCGLIB$$34c21228.createOptimisticOrderUseRedisAndKafka(<generated>)
	at com.crossoverjie.kafka.orderconsumer.kafka.ConsumerTask.dealMessage(ConsumerTask.java:100)
	at com.crossoverjie.kafka.orderconsumer.kafka.ConsumerTask.run(ConsumerTask.java:82)
	at java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:511)
	at java.util.concurrent.FutureTask.run(FutureTask.java:266)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at java.lang.Thread.run(Thread.java:748)
[2018-06-28 17:04:24.242] [consumer-pool-0] ERROR com.crossoverjie.kafka.orderconsumer.kafka.ConsumerTask consumer-pool-0, - unknown exception
java.lang.RuntimeException: 并发更新库存失败
	at com.crossoverjie.kafka.orderconsumer.service.impl.OrderServiceImpl.saleStockOptimisticByRedis(OrderServiceImpl.java:67)
	at com.crossoverjie.kafka.orderconsumer.service.impl.OrderServiceImpl.createOptimisticOrderUseRedisAndKafka(OrderServiceImpl.java:53)
	at com.crossoverjie.kafka.orderconsumer.service.impl.OrderServiceImpl$$FastClassBySpringCGLIB$$fc85889b.invoke(<generated>)
	at org.springframework.cglib.proxy.MethodProxy.invoke(MethodProxy.java:204)
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.invokeJoinpoint(CglibAopProxy.java:738)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:157)
	at org.springframework.transaction.interceptor.TransactionInterceptor$1.proceedWithInvocation(TransactionInterceptor.java:99)
	at org.springframework.transaction.interceptor.TransactionAspectSupport.invokeWithinTransaction(TransactionAspectSupport.java:282)
	at org.springframework.transaction.interceptor.TransactionInterceptor.invoke(TransactionInterceptor.java:96)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:179)
	at org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:673)
	at com.crossoverjie.kafka.orderconsumer.service.impl.OrderServiceImpl$$EnhancerBySpringCGLIB$$34c21228.createOptimisticOrderUseRedisAndKafka(<generated>)
	at com.crossoverjie.kafka.orderconsumer.kafka.ConsumerTask.dealMessage(ConsumerTask.java:100)
	at com.crossoverjie.kafka.orderconsumer.kafka.ConsumerTask.run(ConsumerTask.java:82)
	at java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:511)
	at java.util.concurrent.FutureTask.run(FutureTask.java:266)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at java.lang.Thread.run(Thread.java:748)
[2018-06-28 17:40:14.270] [consumer-pool-0] ERROR com.crossoverjie.kafka.orderconsumer.kafka.ConsumerTask consumer-pool-0, - unknown exception
java.lang.RuntimeException: 并发更新库存失败
	at com.crossoverjie.kafka.orderconsumer.service.impl.OrderServiceImpl.saleStockOptimisticByRedis(OrderServiceImpl.java:67)
	at com.crossoverjie.kafka.orderconsumer.service.impl.OrderServiceImpl.createOptimisticOrderUseRedisAndKafka(OrderServiceImpl.java:53)
	at com.crossoverjie.kafka.orderconsumer.service.impl.OrderServiceImpl$$FastClassBySpringCGLIB$$fc85889b.invoke(<generated>)
	at org.springframework.cglib.proxy.MethodProxy.invoke(MethodProxy.java:204)
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.invokeJoinpoint(CglibAopProxy.java:738)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:157)
	at org.springframework.transaction.interceptor.TransactionInterceptor$1.proceedWithInvocation(TransactionInterceptor.java:99)
	at org.springframework.transaction.interceptor.TransactionAspectSupport.invokeWithinTransaction(TransactionAspectSupport.java:282)
	at org.springframework.transaction.interceptor.TransactionInterceptor.invoke(TransactionInterceptor.java:96)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:179)
	at org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:673)
	at com.crossoverjie.kafka.orderconsumer.service.impl.OrderServiceImpl$$EnhancerBySpringCGLIB$$34c21228.createOptimisticOrderUseRedisAndKafka(<generated>)
	at com.crossoverjie.kafka.orderconsumer.kafka.ConsumerTask.dealMessage(ConsumerTask.java:100)
	at com.crossoverjie.kafka.orderconsumer.kafka.ConsumerTask.run(ConsumerTask.java:82)
	at java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:511)
	at java.util.concurrent.FutureTask.run(FutureTask.java:266)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at java.lang.Thread.run(Thread.java:748)
[2018-06-28 17:40:14.283] [consumer-pool-0] ERROR com.crossoverjie.kafka.orderconsumer.kafka.ConsumerTask consumer-pool-0, - unknown exception
java.lang.RuntimeException: 并发更新库存失败
	at com.crossoverjie.kafka.orderconsumer.service.impl.OrderServiceImpl.saleStockOptimisticByRedis(OrderServiceImpl.java:67)
	at com.crossoverjie.kafka.orderconsumer.service.impl.OrderServiceImpl.createOptimisticOrderUseRedisAndKafka(OrderServiceImpl.java:53)
	at com.crossoverjie.kafka.orderconsumer.service.impl.OrderServiceImpl$$FastClassBySpringCGLIB$$fc85889b.invoke(<generated>)
	at org.springframework.cglib.proxy.MethodProxy.invoke(MethodProxy.java:204)
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.invokeJoinpoint(CglibAopProxy.java:738)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:157)
	at org.springframework.transaction.interceptor.TransactionInterceptor$1.proceedWithInvocation(TransactionInterceptor.java:99)
	at org.springframework.transaction.interceptor.TransactionAspectSupport.invokeWithinTransaction(TransactionAspectSupport.java:282)
	at org.springframework.transaction.interceptor.TransactionInterceptor.invoke(TransactionInterceptor.java:96)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:179)
	at org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:673)
	at com.crossoverjie.kafka.orderconsumer.service.impl.OrderServiceImpl$$EnhancerBySpringCGLIB$$34c21228.createOptimisticOrderUseRedisAndKafka(<generated>)
	at com.crossoverjie.kafka.orderconsumer.kafka.ConsumerTask.dealMessage(ConsumerTask.java:100)
	at com.crossoverjie.kafka.orderconsumer.kafka.ConsumerTask.run(ConsumerTask.java:82)
	at java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:511)
	at java.util.concurrent.FutureTask.run(FutureTask.java:266)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at java.lang.Thread.run(Thread.java:748)
[2018-06-28 17:40:14.297] [consumer-pool-0] ERROR com.crossoverjie.kafka.orderconsumer.kafka.ConsumerTask consumer-pool-0, - unknown exception
java.lang.RuntimeException: 并发更新库存失败
	at com.crossoverjie.kafka.orderconsumer.service.impl.OrderServiceImpl.saleStockOptimisticByRedis(OrderServiceImpl.java:67)
	at com.crossoverjie.kafka.orderconsumer.service.impl.OrderServiceImpl.createOptimisticOrderUseRedisAndKafka(OrderServiceImpl.java:53)
	at com.crossoverjie.kafka.orderconsumer.service.impl.OrderServiceImpl$$FastClassBySpringCGLIB$$fc85889b.invoke(<generated>)
	at org.springframework.cglib.proxy.MethodProxy.invoke(MethodProxy.java:204)
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.invokeJoinpoint(CglibAopProxy.java:738)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:157)
	at org.springframework.transaction.interceptor.TransactionInterceptor$1.proceedWithInvocation(TransactionInterceptor.java:99)
	at org.springframework.transaction.interceptor.TransactionAspectSupport.invokeWithinTransaction(TransactionAspectSupport.java:282)
	at org.springframework.transaction.interceptor.TransactionInterceptor.invoke(TransactionInterceptor.java:96)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:179)
	at org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:673)
	at com.crossoverjie.kafka.orderconsumer.service.impl.OrderServiceImpl$$EnhancerBySpringCGLIB$$34c21228.createOptimisticOrderUseRedisAndKafka(<generated>)
	at com.crossoverjie.kafka.orderconsumer.kafka.ConsumerTask.dealMessage(ConsumerTask.java:100)
	at com.crossoverjie.kafka.orderconsumer.kafka.ConsumerTask.run(ConsumerTask.java:82)
	at java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:511)
	at java.util.concurrent.FutureTask.run(FutureTask.java:266)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at java.lang.Thread.run(Thread.java:748)
[2018-06-28 17:40:14.300] [consumer-pool-0] ERROR com.crossoverjie.kafka.orderconsumer.kafka.ConsumerTask consumer-pool-0, - unknown exception
java.lang.RuntimeException: 并发更新库存失败
	at com.crossoverjie.kafka.orderconsumer.service.impl.OrderServiceImpl.saleStockOptimisticByRedis(OrderServiceImpl.java:67)
	at com.crossoverjie.kafka.orderconsumer.service.impl.OrderServiceImpl.createOptimisticOrderUseRedisAndKafka(OrderServiceImpl.java:53)
	at com.crossoverjie.kafka.orderconsumer.service.impl.OrderServiceImpl$$FastClassBySpringCGLIB$$fc85889b.invoke(<generated>)
	at org.springframework.cglib.proxy.MethodProxy.invoke(MethodProxy.java:204)
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.invokeJoinpoint(CglibAopProxy.java:738)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:157)
	at org.springframework.transaction.interceptor.TransactionInterceptor$1.proceedWithInvocation(TransactionInterceptor.java:99)
	at org.springframework.transaction.interceptor.TransactionAspectSupport.invokeWithinTransaction(TransactionAspectSupport.java:282)
	at org.springframework.transaction.interceptor.TransactionInterceptor.invoke(TransactionInterceptor.java:96)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:179)
	at org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:673)
	at com.crossoverjie.kafka.orderconsumer.service.impl.OrderServiceImpl$$EnhancerBySpringCGLIB$$34c21228.createOptimisticOrderUseRedisAndKafka(<generated>)
	at com.crossoverjie.kafka.orderconsumer.kafka.ConsumerTask.dealMessage(ConsumerTask.java:100)
	at com.crossoverjie.kafka.orderconsumer.kafka.ConsumerTask.run(ConsumerTask.java:82)
	at java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:511)
	at java.util.concurrent.FutureTask.run(FutureTask.java:266)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at java.lang.Thread.run(Thread.java:748)
[2018-06-28 17:40:14.455] [consumer-pool-0] ERROR com.crossoverjie.kafka.orderconsumer.kafka.ConsumerTask consumer-pool-0, - unknown exception
java.lang.RuntimeException: 并发更新库存失败
	at com.crossoverjie.kafka.orderconsumer.service.impl.OrderServiceImpl.saleStockOptimisticByRedis(OrderServiceImpl.java:67)
	at com.crossoverjie.kafka.orderconsumer.service.impl.OrderServiceImpl.createOptimisticOrderUseRedisAndKafka(OrderServiceImpl.java:53)
	at com.crossoverjie.kafka.orderconsumer.service.impl.OrderServiceImpl$$FastClassBySpringCGLIB$$fc85889b.invoke(<generated>)
	at org.springframework.cglib.proxy.MethodProxy.invoke(MethodProxy.java:204)
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.invokeJoinpoint(CglibAopProxy.java:738)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:157)
	at org.springframework.transaction.interceptor.TransactionInterceptor$1.proceedWithInvocation(TransactionInterceptor.java:99)
	at org.springframework.transaction.interceptor.TransactionAspectSupport.invokeWithinTransaction(TransactionAspectSupport.java:282)
	at org.springframework.transaction.interceptor.TransactionInterceptor.invoke(TransactionInterceptor.java:96)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:179)
	at org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:673)
	at com.crossoverjie.kafka.orderconsumer.service.impl.OrderServiceImpl$$EnhancerBySpringCGLIB$$34c21228.createOptimisticOrderUseRedisAndKafka(<generated>)
	at com.crossoverjie.kafka.orderconsumer.kafka.ConsumerTask.dealMessage(ConsumerTask.java:100)
	at com.crossoverjie.kafka.orderconsumer.kafka.ConsumerTask.run(ConsumerTask.java:82)
	at java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:511)
	at java.util.concurrent.FutureTask.run(FutureTask.java:266)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at java.lang.Thread.run(Thread.java:748)
[2018-06-28 17:40:14.458] [consumer-pool-0] ERROR com.crossoverjie.kafka.orderconsumer.kafka.ConsumerTask consumer-pool-0, - unknown exception
java.lang.RuntimeException: 并发更新库存失败
	at com.crossoverjie.kafka.orderconsumer.service.impl.OrderServiceImpl.saleStockOptimisticByRedis(OrderServiceImpl.java:67)
	at com.crossoverjie.kafka.orderconsumer.service.impl.OrderServiceImpl.createOptimisticOrderUseRedisAndKafka(OrderServiceImpl.java:53)
	at com.crossoverjie.kafka.orderconsumer.service.impl.OrderServiceImpl$$FastClassBySpringCGLIB$$fc85889b.invoke(<generated>)
	at org.springframework.cglib.proxy.MethodProxy.invoke(MethodProxy.java:204)
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.invokeJoinpoint(CglibAopProxy.java:738)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:157)
	at org.springframework.transaction.interceptor.TransactionInterceptor$1.proceedWithInvocation(TransactionInterceptor.java:99)
	at org.springframework.transaction.interceptor.TransactionAspectSupport.invokeWithinTransaction(TransactionAspectSupport.java:282)
	at org.springframework.transaction.interceptor.TransactionInterceptor.invoke(TransactionInterceptor.java:96)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:179)
	at org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:673)
	at com.crossoverjie.kafka.orderconsumer.service.impl.OrderServiceImpl$$EnhancerBySpringCGLIB$$34c21228.createOptimisticOrderUseRedisAndKafka(<generated>)
	at com.crossoverjie.kafka.orderconsumer.kafka.ConsumerTask.dealMessage(ConsumerTask.java:100)
	at com.crossoverjie.kafka.orderconsumer.kafka.ConsumerTask.run(ConsumerTask.java:82)
	at java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:511)
	at java.util.concurrent.FutureTask.run(FutureTask.java:266)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at java.lang.Thread.run(Thread.java:748)
[2018-06-28 17:40:14.460] [consumer-pool-0] ERROR com.crossoverjie.kafka.orderconsumer.kafka.ConsumerTask consumer-pool-0, - unknown exception
java.lang.RuntimeException: 并发更新库存失败
	at com.crossoverjie.kafka.orderconsumer.service.impl.OrderServiceImpl.saleStockOptimisticByRedis(OrderServiceImpl.java:67)
	at com.crossoverjie.kafka.orderconsumer.service.impl.OrderServiceImpl.createOptimisticOrderUseRedisAndKafka(OrderServiceImpl.java:53)
	at com.crossoverjie.kafka.orderconsumer.service.impl.OrderServiceImpl$$FastClassBySpringCGLIB$$fc85889b.invoke(<generated>)
	at org.springframework.cglib.proxy.MethodProxy.invoke(MethodProxy.java:204)
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.invokeJoinpoint(CglibAopProxy.java:738)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:157)
	at org.springframework.transaction.interceptor.TransactionInterceptor$1.proceedWithInvocation(TransactionInterceptor.java:99)
	at org.springframework.transaction.interceptor.TransactionAspectSupport.invokeWithinTransaction(TransactionAspectSupport.java:282)
	at org.springframework.transaction.interceptor.TransactionInterceptor.invoke(TransactionInterceptor.java:96)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:179)
	at org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:673)
	at com.crossoverjie.kafka.orderconsumer.service.impl.OrderServiceImpl$$EnhancerBySpringCGLIB$$34c21228.createOptimisticOrderUseRedisAndKafka(<generated>)
	at com.crossoverjie.kafka.orderconsumer.kafka.ConsumerTask.dealMessage(ConsumerTask.java:100)
	at com.crossoverjie.kafka.orderconsumer.kafka.ConsumerTask.run(ConsumerTask.java:82)
	at java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:511)
	at java.util.concurrent.FutureTask.run(FutureTask.java:266)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at java.lang.Thread.run(Thread.java:748)
[2018-06-28 17:40:14.463] [consumer-pool-0] ERROR com.crossoverjie.kafka.orderconsumer.kafka.ConsumerTask consumer-pool-0, - unknown exception
java.lang.RuntimeException: 并发更新库存失败
	at com.crossoverjie.kafka.orderconsumer.service.impl.OrderServiceImpl.saleStockOptimisticByRedis(OrderServiceImpl.java:67)
	at com.crossoverjie.kafka.orderconsumer.service.impl.OrderServiceImpl.createOptimisticOrderUseRedisAndKafka(OrderServiceImpl.java:53)
	at com.crossoverjie.kafka.orderconsumer.service.impl.OrderServiceImpl$$FastClassBySpringCGLIB$$fc85889b.invoke(<generated>)
	at org.springframework.cglib.proxy.MethodProxy.invoke(MethodProxy.java:204)
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.invokeJoinpoint(CglibAopProxy.java:738)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:157)
	at org.springframework.transaction.interceptor.TransactionInterceptor$1.proceedWithInvocation(TransactionInterceptor.java:99)
	at org.springframework.transaction.interceptor.TransactionAspectSupport.invokeWithinTransaction(TransactionAspectSupport.java:282)
	at org.springframework.transaction.interceptor.TransactionInterceptor.invoke(TransactionInterceptor.java:96)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:179)
	at org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:673)
	at com.crossoverjie.kafka.orderconsumer.service.impl.OrderServiceImpl$$EnhancerBySpringCGLIB$$34c21228.createOptimisticOrderUseRedisAndKafka(<generated>)
	at com.crossoverjie.kafka.orderconsumer.kafka.ConsumerTask.dealMessage(ConsumerTask.java:100)
	at com.crossoverjie.kafka.orderconsumer.kafka.ConsumerTask.run(ConsumerTask.java:82)
	at java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:511)
	at java.util.concurrent.FutureTask.run(FutureTask.java:266)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at java.lang.Thread.run(Thread.java:748)
[2018-06-28 17:40:14.465] [consumer-pool-0] ERROR com.crossoverjie.kafka.orderconsumer.kafka.ConsumerTask consumer-pool-0, - unknown exception
java.lang.RuntimeException: 并发更新库存失败
	at com.crossoverjie.kafka.orderconsumer.service.impl.OrderServiceImpl.saleStockOptimisticByRedis(OrderServiceImpl.java:67)
	at com.crossoverjie.kafka.orderconsumer.service.impl.OrderServiceImpl.createOptimisticOrderUseRedisAndKafka(OrderServiceImpl.java:53)
	at com.crossoverjie.kafka.orderconsumer.service.impl.OrderServiceImpl$$FastClassBySpringCGLIB$$fc85889b.invoke(<generated>)
	at org.springframework.cglib.proxy.MethodProxy.invoke(MethodProxy.java:204)
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.invokeJoinpoint(CglibAopProxy.java:738)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:157)
	at org.springframework.transaction.interceptor.TransactionInterceptor$1.proceedWithInvocation(TransactionInterceptor.java:99)
	at org.springframework.transaction.interceptor.TransactionAspectSupport.invokeWithinTransaction(TransactionAspectSupport.java:282)
	at org.springframework.transaction.interceptor.TransactionInterceptor.invoke(TransactionInterceptor.java:96)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:179)
	at org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:673)
	at com.crossoverjie.kafka.orderconsumer.service.impl.OrderServiceImpl$$EnhancerBySpringCGLIB$$34c21228.createOptimisticOrderUseRedisAndKafka(<generated>)
	at com.crossoverjie.kafka.orderconsumer.kafka.ConsumerTask.dealMessage(ConsumerTask.java:100)
	at com.crossoverjie.kafka.orderconsumer.kafka.ConsumerTask.run(ConsumerTask.java:82)
	at java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:511)
	at java.util.concurrent.FutureTask.run(FutureTask.java:266)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at java.lang.Thread.run(Thread.java:748)
[2018-06-28 17:40:14.719] [consumer-pool-0] ERROR com.crossoverjie.kafka.orderconsumer.kafka.ConsumerTask consumer-pool-0, - unknown exception
java.lang.RuntimeException: 并发更新库存失败
	at com.crossoverjie.kafka.orderconsumer.service.impl.OrderServiceImpl.saleStockOptimisticByRedis(OrderServiceImpl.java:67)
	at com.crossoverjie.kafka.orderconsumer.service.impl.OrderServiceImpl.createOptimisticOrderUseRedisAndKafka(OrderServiceImpl.java:53)
	at com.crossoverjie.kafka.orderconsumer.service.impl.OrderServiceImpl$$FastClassBySpringCGLIB$$fc85889b.invoke(<generated>)
	at org.springframework.cglib.proxy.MethodProxy.invoke(MethodProxy.java:204)
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.invokeJoinpoint(CglibAopProxy.java:738)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:157)
	at org.springframework.transaction.interceptor.TransactionInterceptor$1.proceedWithInvocation(TransactionInterceptor.java:99)
	at org.springframework.transaction.interceptor.TransactionAspectSupport.invokeWithinTransaction(TransactionAspectSupport.java:282)
	at org.springframework.transaction.interceptor.TransactionInterceptor.invoke(TransactionInterceptor.java:96)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:179)
	at org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:673)
	at com.crossoverjie.kafka.orderconsumer.service.impl.OrderServiceImpl$$EnhancerBySpringCGLIB$$34c21228.createOptimisticOrderUseRedisAndKafka(<generated>)
	at com.crossoverjie.kafka.orderconsumer.kafka.ConsumerTask.dealMessage(ConsumerTask.java:100)
	at com.crossoverjie.kafka.orderconsumer.kafka.ConsumerTask.run(ConsumerTask.java:82)
	at java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:511)
	at java.util.concurrent.FutureTask.run(FutureTask.java:266)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at java.lang.Thread.run(Thread.java:748)
[2018-06-28 17:40:14.738] [consumer-pool-0] ERROR com.crossoverjie.kafka.orderconsumer.kafka.ConsumerTask consumer-pool-0, - unknown exception
java.lang.RuntimeException: 并发更新库存失败
	at com.crossoverjie.kafka.orderconsumer.service.impl.OrderServiceImpl.saleStockOptimisticByRedis(OrderServiceImpl.java:67)
	at com.crossoverjie.kafka.orderconsumer.service.impl.OrderServiceImpl.createOptimisticOrderUseRedisAndKafka(OrderServiceImpl.java:53)
	at com.crossoverjie.kafka.orderconsumer.service.impl.OrderServiceImpl$$FastClassBySpringCGLIB$$fc85889b.invoke(<generated>)
	at org.springframework.cglib.proxy.MethodProxy.invoke(MethodProxy.java:204)
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.invokeJoinpoint(CglibAopProxy.java:738)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:157)
	at org.springframework.transaction.interceptor.TransactionInterceptor$1.proceedWithInvocation(TransactionInterceptor.java:99)
	at org.springframework.transaction.interceptor.TransactionAspectSupport.invokeWithinTransaction(TransactionAspectSupport.java:282)
	at org.springframework.transaction.interceptor.TransactionInterceptor.invoke(TransactionInterceptor.java:96)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:179)
	at org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:673)
	at com.crossoverjie.kafka.orderconsumer.service.impl.OrderServiceImpl$$EnhancerBySpringCGLIB$$34c21228.createOptimisticOrderUseRedisAndKafka(<generated>)
	at com.crossoverjie.kafka.orderconsumer.kafka.ConsumerTask.dealMessage(ConsumerTask.java:100)
	at com.crossoverjie.kafka.orderconsumer.kafka.ConsumerTask.run(ConsumerTask.java:82)
	at java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:511)
	at java.util.concurrent.FutureTask.run(FutureTask.java:266)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at java.lang.Thread.run(Thread.java:748)
[2018-06-28 17:40:14.745] [consumer-pool-0] ERROR com.crossoverjie.kafka.orderconsumer.kafka.ConsumerTask consumer-pool-0, - unknown exception
java.lang.RuntimeException: 并发更新库存失败
	at com.crossoverjie.kafka.orderconsumer.service.impl.OrderServiceImpl.saleStockOptimisticByRedis(OrderServiceImpl.java:67)
	at com.crossoverjie.kafka.orderconsumer.service.impl.OrderServiceImpl.createOptimisticOrderUseRedisAndKafka(OrderServiceImpl.java:53)
	at com.crossoverjie.kafka.orderconsumer.service.impl.OrderServiceImpl$$FastClassBySpringCGLIB$$fc85889b.invoke(<generated>)
	at org.springframework.cglib.proxy.MethodProxy.invoke(MethodProxy.java:204)
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.invokeJoinpoint(CglibAopProxy.java:738)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:157)
	at org.springframework.transaction.interceptor.TransactionInterceptor$1.proceedWithInvocation(TransactionInterceptor.java:99)
	at org.springframework.transaction.interceptor.TransactionAspectSupport.invokeWithinTransaction(TransactionAspectSupport.java:282)
	at org.springframework.transaction.interceptor.TransactionInterceptor.invoke(TransactionInterceptor.java:96)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:179)
	at org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:673)
	at com.crossoverjie.kafka.orderconsumer.service.impl.OrderServiceImpl$$EnhancerBySpringCGLIB$$34c21228.createOptimisticOrderUseRedisAndKafka(<generated>)
	at com.crossoverjie.kafka.orderconsumer.kafka.ConsumerTask.dealMessage(ConsumerTask.java:100)
	at com.crossoverjie.kafka.orderconsumer.kafka.ConsumerTask.run(ConsumerTask.java:82)
	at java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:511)
	at java.util.concurrent.FutureTask.run(FutureTask.java:266)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at java.lang.Thread.run(Thread.java:748)
[2018-06-28 17:40:14.755] [consumer-pool-0] ERROR com.crossoverjie.kafka.orderconsumer.kafka.ConsumerTask consumer-pool-0, - unknown exception
java.lang.RuntimeException: 并发更新库存失败
	at com.crossoverjie.kafka.orderconsumer.service.impl.OrderServiceImpl.saleStockOptimisticByRedis(OrderServiceImpl.java:67)
	at com.crossoverjie.kafka.orderconsumer.service.impl.OrderServiceImpl.createOptimisticOrderUseRedisAndKafka(OrderServiceImpl.java:53)
	at com.crossoverjie.kafka.orderconsumer.service.impl.OrderServiceImpl$$FastClassBySpringCGLIB$$fc85889b.invoke(<generated>)
	at org.springframework.cglib.proxy.MethodProxy.invoke(MethodProxy.java:204)
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.invokeJoinpoint(CglibAopProxy.java:738)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:157)
	at org.springframework.transaction.interceptor.TransactionInterceptor$1.proceedWithInvocation(TransactionInterceptor.java:99)
	at org.springframework.transaction.interceptor.TransactionAspectSupport.invokeWithinTransaction(TransactionAspectSupport.java:282)
	at org.springframework.transaction.interceptor.TransactionInterceptor.invoke(TransactionInterceptor.java:96)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:179)
	at org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:673)
	at com.crossoverjie.kafka.orderconsumer.service.impl.OrderServiceImpl$$EnhancerBySpringCGLIB$$34c21228.createOptimisticOrderUseRedisAndKafka(<generated>)
	at com.crossoverjie.kafka.orderconsumer.kafka.ConsumerTask.dealMessage(ConsumerTask.java:100)
	at com.crossoverjie.kafka.orderconsumer.kafka.ConsumerTask.run(ConsumerTask.java:82)
	at java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:511)
	at java.util.concurrent.FutureTask.run(FutureTask.java:266)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at java.lang.Thread.run(Thread.java:748)
[2018-06-28 17:40:14.761] [consumer-pool-0] ERROR com.crossoverjie.kafka.orderconsumer.kafka.ConsumerTask consumer-pool-0, - unknown exception
java.lang.RuntimeException: 并发更新库存失败
	at com.crossoverjie.kafka.orderconsumer.service.impl.OrderServiceImpl.saleStockOptimisticByRedis(OrderServiceImpl.java:67)
	at com.crossoverjie.kafka.orderconsumer.service.impl.OrderServiceImpl.createOptimisticOrderUseRedisAndKafka(OrderServiceImpl.java:53)
	at com.crossoverjie.kafka.orderconsumer.service.impl.OrderServiceImpl$$FastClassBySpringCGLIB$$fc85889b.invoke(<generated>)
	at org.springframework.cglib.proxy.MethodProxy.invoke(MethodProxy.java:204)
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.invokeJoinpoint(CglibAopProxy.java:738)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:157)
	at org.springframework.transaction.interceptor.TransactionInterceptor$1.proceedWithInvocation(TransactionInterceptor.java:99)
	at org.springframework.transaction.interceptor.TransactionAspectSupport.invokeWithinTransaction(TransactionAspectSupport.java:282)
	at org.springframework.transaction.interceptor.TransactionInterceptor.invoke(TransactionInterceptor.java:96)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:179)
	at org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:673)
	at com.crossoverjie.kafka.orderconsumer.service.impl.OrderServiceImpl$$EnhancerBySpringCGLIB$$34c21228.createOptimisticOrderUseRedisAndKafka(<generated>)
	at com.crossoverjie.kafka.orderconsumer.kafka.ConsumerTask.dealMessage(ConsumerTask.java:100)
	at com.crossoverjie.kafka.orderconsumer.kafka.ConsumerTask.run(ConsumerTask.java:82)
	at java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:511)
	at java.util.concurrent.FutureTask.run(FutureTask.java:266)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at java.lang.Thread.run(Thread.java:748)
[2018-06-28 17:40:14.767] [consumer-pool-0] ERROR com.crossoverjie.kafka.orderconsumer.kafka.ConsumerTask consumer-pool-0, - unknown exception
java.lang.RuntimeException: 并发更新库存失败
	at com.crossoverjie.kafka.orderconsumer.service.impl.OrderServiceImpl.saleStockOptimisticByRedis(OrderServiceImpl.java:67)
	at com.crossoverjie.kafka.orderconsumer.service.impl.OrderServiceImpl.createOptimisticOrderUseRedisAndKafka(OrderServiceImpl.java:53)
	at com.crossoverjie.kafka.orderconsumer.service.impl.OrderServiceImpl$$FastClassBySpringCGLIB$$fc85889b.invoke(<generated>)
	at org.springframework.cglib.proxy.MethodProxy.invoke(MethodProxy.java:204)
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.invokeJoinpoint(CglibAopProxy.java:738)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:157)
	at org.springframework.transaction.interceptor.TransactionInterceptor$1.proceedWithInvocation(TransactionInterceptor.java:99)
	at org.springframework.transaction.interceptor.TransactionAspectSupport.invokeWithinTransaction(TransactionAspectSupport.java:282)
	at org.springframework.transaction.interceptor.TransactionInterceptor.invoke(TransactionInterceptor.java:96)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:179)
	at org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:673)
	at com.crossoverjie.kafka.orderconsumer.service.impl.OrderServiceImpl$$EnhancerBySpringCGLIB$$34c21228.createOptimisticOrderUseRedisAndKafka(<generated>)
	at com.crossoverjie.kafka.orderconsumer.kafka.ConsumerTask.dealMessage(ConsumerTask.java:100)
	at com.crossoverjie.kafka.orderconsumer.kafka.ConsumerTask.run(ConsumerTask.java:82)
	at java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:511)
	at java.util.concurrent.FutureTask.run(FutureTask.java:266)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at java.lang.Thread.run(Thread.java:748)
[2018-06-28 17:40:14.776] [consumer-pool-0] ERROR com.crossoverjie.kafka.orderconsumer.kafka.ConsumerTask consumer-pool-0, - unknown exception
java.lang.RuntimeException: 并发更新库存失败
	at com.crossoverjie.kafka.orderconsumer.service.impl.OrderServiceImpl.saleStockOptimisticByRedis(OrderServiceImpl.java:67)
	at com.crossoverjie.kafka.orderconsumer.service.impl.OrderServiceImpl.createOptimisticOrderUseRedisAndKafka(OrderServiceImpl.java:53)
	at com.crossoverjie.kafka.orderconsumer.service.impl.OrderServiceImpl$$FastClassBySpringCGLIB$$fc85889b.invoke(<generated>)
	at org.springframework.cglib.proxy.MethodProxy.invoke(MethodProxy.java:204)
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.invokeJoinpoint(CglibAopProxy.java:738)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:157)
	at org.springframework.transaction.interceptor.TransactionInterceptor$1.proceedWithInvocation(TransactionInterceptor.java:99)
	at org.springframework.transaction.interceptor.TransactionAspectSupport.invokeWithinTransaction(TransactionAspectSupport.java:282)
	at org.springframework.transaction.interceptor.TransactionInterceptor.invoke(TransactionInterceptor.java:96)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:179)
	at org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:673)
	at com.crossoverjie.kafka.orderconsumer.service.impl.OrderServiceImpl$$EnhancerBySpringCGLIB$$34c21228.createOptimisticOrderUseRedisAndKafka(<generated>)
	at com.crossoverjie.kafka.orderconsumer.kafka.ConsumerTask.dealMessage(ConsumerTask.java:100)
	at com.crossoverjie.kafka.orderconsumer.kafka.ConsumerTask.run(ConsumerTask.java:82)
	at java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:511)
	at java.util.concurrent.FutureTask.run(FutureTask.java:266)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at java.lang.Thread.run(Thread.java:748)
[2018-06-28 17:40:14.781] [consumer-pool-0] ERROR com.crossoverjie.kafka.orderconsumer.kafka.ConsumerTask consumer-pool-0, - unknown exception
java.lang.RuntimeException: 并发更新库存失败
	at com.crossoverjie.kafka.orderconsumer.service.impl.OrderServiceImpl.saleStockOptimisticByRedis(OrderServiceImpl.java:67)
	at com.crossoverjie.kafka.orderconsumer.service.impl.OrderServiceImpl.createOptimisticOrderUseRedisAndKafka(OrderServiceImpl.java:53)
	at com.crossoverjie.kafka.orderconsumer.service.impl.OrderServiceImpl$$FastClassBySpringCGLIB$$fc85889b.invoke(<generated>)
	at org.springframework.cglib.proxy.MethodProxy.invoke(MethodProxy.java:204)
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.invokeJoinpoint(CglibAopProxy.java:738)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:157)
	at org.springframework.transaction.interceptor.TransactionInterceptor$1.proceedWithInvocation(TransactionInterceptor.java:99)
	at org.springframework.transaction.interceptor.TransactionAspectSupport.invokeWithinTransaction(TransactionAspectSupport.java:282)
	at org.springframework.transaction.interceptor.TransactionInterceptor.invoke(TransactionInterceptor.java:96)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:179)
	at org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:673)
	at com.crossoverjie.kafka.orderconsumer.service.impl.OrderServiceImpl$$EnhancerBySpringCGLIB$$34c21228.createOptimisticOrderUseRedisAndKafka(<generated>)
	at com.crossoverjie.kafka.orderconsumer.kafka.ConsumerTask.dealMessage(ConsumerTask.java:100)
	at com.crossoverjie.kafka.orderconsumer.kafka.ConsumerTask.run(ConsumerTask.java:82)
	at java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:511)
	at java.util.concurrent.FutureTask.run(FutureTask.java:266)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at java.lang.Thread.run(Thread.java:748)
[2018-06-28 17:40:14.786] [consumer-pool-0] ERROR com.crossoverjie.kafka.orderconsumer.kafka.ConsumerTask consumer-pool-0, - unknown exception
java.lang.RuntimeException: 并发更新库存失败
	at com.crossoverjie.kafka.orderconsumer.service.impl.OrderServiceImpl.saleStockOptimisticByRedis(OrderServiceImpl.java:67)
	at com.crossoverjie.kafka.orderconsumer.service.impl.OrderServiceImpl.createOptimisticOrderUseRedisAndKafka(OrderServiceImpl.java:53)
	at com.crossoverjie.kafka.orderconsumer.service.impl.OrderServiceImpl$$FastClassBySpringCGLIB$$fc85889b.invoke(<generated>)
	at org.springframework.cglib.proxy.MethodProxy.invoke(MethodProxy.java:204)
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.invokeJoinpoint(CglibAopProxy.java:738)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:157)
	at org.springframework.transaction.interceptor.TransactionInterceptor$1.proceedWithInvocation(TransactionInterceptor.java:99)
	at org.springframework.transaction.interceptor.TransactionAspectSupport.invokeWithinTransaction(TransactionAspectSupport.java:282)
	at org.springframework.transaction.interceptor.TransactionInterceptor.invoke(TransactionInterceptor.java:96)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:179)
	at org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:673)
	at com.crossoverjie.kafka.orderconsumer.service.impl.OrderServiceImpl$$EnhancerBySpringCGLIB$$34c21228.createOptimisticOrderUseRedisAndKafka(<generated>)
	at com.crossoverjie.kafka.orderconsumer.kafka.ConsumerTask.dealMessage(ConsumerTask.java:100)
	at com.crossoverjie.kafka.orderconsumer.kafka.ConsumerTask.run(ConsumerTask.java:82)
	at java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:511)
	at java.util.concurrent.FutureTask.run(FutureTask.java:266)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at java.lang.Thread.run(Thread.java:748)
[2018-06-28 17:40:14.792] [consumer-pool-0] ERROR com.crossoverjie.kafka.orderconsumer.kafka.ConsumerTask consumer-pool-0, - unknown exception
java.lang.RuntimeException: 并发更新库存失败
	at com.crossoverjie.kafka.orderconsumer.service.impl.OrderServiceImpl.saleStockOptimisticByRedis(OrderServiceImpl.java:67)
	at com.crossoverjie.kafka.orderconsumer.service.impl.OrderServiceImpl.createOptimisticOrderUseRedisAndKafka(OrderServiceImpl.java:53)
	at com.crossoverjie.kafka.orderconsumer.service.impl.OrderServiceImpl$$FastClassBySpringCGLIB$$fc85889b.invoke(<generated>)
	at org.springframework.cglib.proxy.MethodProxy.invoke(MethodProxy.java:204)
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.invokeJoinpoint(CglibAopProxy.java:738)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:157)
	at org.springframework.transaction.interceptor.TransactionInterceptor$1.proceedWithInvocation(TransactionInterceptor.java:99)
	at org.springframework.transaction.interceptor.TransactionAspectSupport.invokeWithinTransaction(TransactionAspectSupport.java:282)
	at org.springframework.transaction.interceptor.TransactionInterceptor.invoke(TransactionInterceptor.java:96)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:179)
	at org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:673)
	at com.crossoverjie.kafka.orderconsumer.service.impl.OrderServiceImpl$$EnhancerBySpringCGLIB$$34c21228.createOptimisticOrderUseRedisAndKafka(<generated>)
	at com.crossoverjie.kafka.orderconsumer.kafka.ConsumerTask.dealMessage(ConsumerTask.java:100)
	at com.crossoverjie.kafka.orderconsumer.kafka.ConsumerTask.run(ConsumerTask.java:82)
	at java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:511)
	at java.util.concurrent.FutureTask.run(FutureTask.java:266)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at java.lang.Thread.run(Thread.java:748)
[2018-06-28 17:40:14.798] [consumer-pool-0] ERROR com.crossoverjie.kafka.orderconsumer.kafka.ConsumerTask consumer-pool-0, - unknown exception
java.lang.RuntimeException: 并发更新库存失败
	at com.crossoverjie.kafka.orderconsumer.service.impl.OrderServiceImpl.saleStockOptimisticByRedis(OrderServiceImpl.java:67)
	at com.crossoverjie.kafka.orderconsumer.service.impl.OrderServiceImpl.createOptimisticOrderUseRedisAndKafka(OrderServiceImpl.java:53)
	at com.crossoverjie.kafka.orderconsumer.service.impl.OrderServiceImpl$$FastClassBySpringCGLIB$$fc85889b.invoke(<generated>)
	at org.springframework.cglib.proxy.MethodProxy.invoke(MethodProxy.java:204)
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.invokeJoinpoint(CglibAopProxy.java:738)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:157)
	at org.springframework.transaction.interceptor.TransactionInterceptor$1.proceedWithInvocation(TransactionInterceptor.java:99)
	at org.springframework.transaction.interceptor.TransactionAspectSupport.invokeWithinTransaction(TransactionAspectSupport.java:282)
	at org.springframework.transaction.interceptor.TransactionInterceptor.invoke(TransactionInterceptor.java:96)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:179)
	at org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:673)
	at com.crossoverjie.kafka.orderconsumer.service.impl.OrderServiceImpl$$EnhancerBySpringCGLIB$$34c21228.createOptimisticOrderUseRedisAndKafka(<generated>)
	at com.crossoverjie.kafka.orderconsumer.kafka.ConsumerTask.dealMessage(ConsumerTask.java:100)
	at com.crossoverjie.kafka.orderconsumer.kafka.ConsumerTask.run(ConsumerTask.java:82)
	at java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:511)
	at java.util.concurrent.FutureTask.run(FutureTask.java:266)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at java.lang.Thread.run(Thread.java:748)
[2018-06-28 17:40:14.804] [consumer-pool-0] ERROR com.crossoverjie.kafka.orderconsumer.kafka.ConsumerTask consumer-pool-0, - unknown exception
java.lang.RuntimeException: 并发更新库存失败
	at com.crossoverjie.kafka.orderconsumer.service.impl.OrderServiceImpl.saleStockOptimisticByRedis(OrderServiceImpl.java:67)
	at com.crossoverjie.kafka.orderconsumer.service.impl.OrderServiceImpl.createOptimisticOrderUseRedisAndKafka(OrderServiceImpl.java:53)
	at com.crossoverjie.kafka.orderconsumer.service.impl.OrderServiceImpl$$FastClassBySpringCGLIB$$fc85889b.invoke(<generated>)
	at org.springframework.cglib.proxy.MethodProxy.invoke(MethodProxy.java:204)
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.invokeJoinpoint(CglibAopProxy.java:738)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:157)
	at org.springframework.transaction.interceptor.TransactionInterceptor$1.proceedWithInvocation(TransactionInterceptor.java:99)
	at org.springframework.transaction.interceptor.TransactionAspectSupport.invokeWithinTransaction(TransactionAspectSupport.java:282)
	at org.springframework.transaction.interceptor.TransactionInterceptor.invoke(TransactionInterceptor.java:96)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:179)
	at org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:673)
	at com.crossoverjie.kafka.orderconsumer.service.impl.OrderServiceImpl$$EnhancerBySpringCGLIB$$34c21228.createOptimisticOrderUseRedisAndKafka(<generated>)
	at com.crossoverjie.kafka.orderconsumer.kafka.ConsumerTask.dealMessage(ConsumerTask.java:100)
	at com.crossoverjie.kafka.orderconsumer.kafka.ConsumerTask.run(ConsumerTask.java:82)
	at java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:511)
	at java.util.concurrent.FutureTask.run(FutureTask.java:266)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at java.lang.Thread.run(Thread.java:748)
[2018-06-28 17:40:14.810] [consumer-pool-0] ERROR com.crossoverjie.kafka.orderconsumer.kafka.ConsumerTask consumer-pool-0, - unknown exception
java.lang.RuntimeException: 并发更新库存失败
	at com.crossoverjie.kafka.orderconsumer.service.impl.OrderServiceImpl.saleStockOptimisticByRedis(OrderServiceImpl.java:67)
	at com.crossoverjie.kafka.orderconsumer.service.impl.OrderServiceImpl.createOptimisticOrderUseRedisAndKafka(OrderServiceImpl.java:53)
	at com.crossoverjie.kafka.orderconsumer.service.impl.OrderServiceImpl$$FastClassBySpringCGLIB$$fc85889b.invoke(<generated>)
	at org.springframework.cglib.proxy.MethodProxy.invoke(MethodProxy.java:204)
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.invokeJoinpoint(CglibAopProxy.java:738)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:157)
	at org.springframework.transaction.interceptor.TransactionInterceptor$1.proceedWithInvocation(TransactionInterceptor.java:99)
	at org.springframework.transaction.interceptor.TransactionAspectSupport.invokeWithinTransaction(TransactionAspectSupport.java:282)
	at org.springframework.transaction.interceptor.TransactionInterceptor.invoke(TransactionInterceptor.java:96)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:179)
	at org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:673)
	at com.crossoverjie.kafka.orderconsumer.service.impl.OrderServiceImpl$$EnhancerBySpringCGLIB$$34c21228.createOptimisticOrderUseRedisAndKafka(<generated>)
	at com.crossoverjie.kafka.orderconsumer.kafka.ConsumerTask.dealMessage(ConsumerTask.java:100)
	at com.crossoverjie.kafka.orderconsumer.kafka.ConsumerTask.run(ConsumerTask.java:82)
	at java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:511)
	at java.util.concurrent.FutureTask.run(FutureTask.java:266)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at java.lang.Thread.run(Thread.java:748)
[2018-06-28 17:40:14.815] [consumer-pool-0] ERROR com.crossoverjie.kafka.orderconsumer.kafka.ConsumerTask consumer-pool-0, - unknown exception
java.lang.RuntimeException: 并发更新库存失败
	at com.crossoverjie.kafka.orderconsumer.service.impl.OrderServiceImpl.saleStockOptimisticByRedis(OrderServiceImpl.java:67)
	at com.crossoverjie.kafka.orderconsumer.service.impl.OrderServiceImpl.createOptimisticOrderUseRedisAndKafka(OrderServiceImpl.java:53)
	at com.crossoverjie.kafka.orderconsumer.service.impl.OrderServiceImpl$$FastClassBySpringCGLIB$$fc85889b.invoke(<generated>)
	at org.springframework.cglib.proxy.MethodProxy.invoke(MethodProxy.java:204)
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.invokeJoinpoint(CglibAopProxy.java:738)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:157)
	at org.springframework.transaction.interceptor.TransactionInterceptor$1.proceedWithInvocation(TransactionInterceptor.java:99)
	at org.springframework.transaction.interceptor.TransactionAspectSupport.invokeWithinTransaction(TransactionAspectSupport.java:282)
	at org.springframework.transaction.interceptor.TransactionInterceptor.invoke(TransactionInterceptor.java:96)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:179)
	at org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:673)
	at com.crossoverjie.kafka.orderconsumer.service.impl.OrderServiceImpl$$EnhancerBySpringCGLIB$$34c21228.createOptimisticOrderUseRedisAndKafka(<generated>)
	at com.crossoverjie.kafka.orderconsumer.kafka.ConsumerTask.dealMessage(ConsumerTask.java:100)
	at com.crossoverjie.kafka.orderconsumer.kafka.ConsumerTask.run(ConsumerTask.java:82)
	at java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:511)
	at java.util.concurrent.FutureTask.run(FutureTask.java:266)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at java.lang.Thread.run(Thread.java:748)
[2018-06-28 17:40:14.824] [consumer-pool-0] ERROR com.crossoverjie.kafka.orderconsumer.kafka.ConsumerTask consumer-pool-0, - unknown exception
java.lang.RuntimeException: 并发更新库存失败
	at com.crossoverjie.kafka.orderconsumer.service.impl.OrderServiceImpl.saleStockOptimisticByRedis(OrderServiceImpl.java:67)
	at com.crossoverjie.kafka.orderconsumer.service.impl.OrderServiceImpl.createOptimisticOrderUseRedisAndKafka(OrderServiceImpl.java:53)
	at com.crossoverjie.kafka.orderconsumer.service.impl.OrderServiceImpl$$FastClassBySpringCGLIB$$fc85889b.invoke(<generated>)
	at org.springframework.cglib.proxy.MethodProxy.invoke(MethodProxy.java:204)
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.invokeJoinpoint(CglibAopProxy.java:738)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:157)
	at org.springframework.transaction.interceptor.TransactionInterceptor$1.proceedWithInvocation(TransactionInterceptor.java:99)
	at org.springframework.transaction.interceptor.TransactionAspectSupport.invokeWithinTransaction(TransactionAspectSupport.java:282)
	at org.springframework.transaction.interceptor.TransactionInterceptor.invoke(TransactionInterceptor.java:96)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:179)
	at org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:673)
	at com.crossoverjie.kafka.orderconsumer.service.impl.OrderServiceImpl$$EnhancerBySpringCGLIB$$34c21228.createOptimisticOrderUseRedisAndKafka(<generated>)
	at com.crossoverjie.kafka.orderconsumer.kafka.ConsumerTask.dealMessage(ConsumerTask.java:100)
	at com.crossoverjie.kafka.orderconsumer.kafka.ConsumerTask.run(ConsumerTask.java:82)
	at java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:511)
	at java.util.concurrent.FutureTask.run(FutureTask.java:266)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at java.lang.Thread.run(Thread.java:748)
[2018-06-28 17:40:14.827] [consumer-pool-0] ERROR com.crossoverjie.kafka.orderconsumer.kafka.ConsumerTask consumer-pool-0, - unknown exception
java.lang.RuntimeException: 并发更新库存失败
	at com.crossoverjie.kafka.orderconsumer.service.impl.OrderServiceImpl.saleStockOptimisticByRedis(OrderServiceImpl.java:67)
	at com.crossoverjie.kafka.orderconsumer.service.impl.OrderServiceImpl.createOptimisticOrderUseRedisAndKafka(OrderServiceImpl.java:53)
	at com.crossoverjie.kafka.orderconsumer.service.impl.OrderServiceImpl$$FastClassBySpringCGLIB$$fc85889b.invoke(<generated>)
	at org.springframework.cglib.proxy.MethodProxy.invoke(MethodProxy.java:204)
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.invokeJoinpoint(CglibAopProxy.java:738)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:157)
	at org.springframework.transaction.interceptor.TransactionInterceptor$1.proceedWithInvocation(TransactionInterceptor.java:99)
	at org.springframework.transaction.interceptor.TransactionAspectSupport.invokeWithinTransaction(TransactionAspectSupport.java:282)
	at org.springframework.transaction.interceptor.TransactionInterceptor.invoke(TransactionInterceptor.java:96)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:179)
	at org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:673)
	at com.crossoverjie.kafka.orderconsumer.service.impl.OrderServiceImpl$$EnhancerBySpringCGLIB$$34c21228.createOptimisticOrderUseRedisAndKafka(<generated>)
	at com.crossoverjie.kafka.orderconsumer.kafka.ConsumerTask.dealMessage(ConsumerTask.java:100)
	at com.crossoverjie.kafka.orderconsumer.kafka.ConsumerTask.run(ConsumerTask.java:82)
	at java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:511)
	at java.util.concurrent.FutureTask.run(FutureTask.java:266)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at java.lang.Thread.run(Thread.java:748)
[2018-06-28 17:40:14.832] [consumer-pool-0] ERROR com.crossoverjie.kafka.orderconsumer.kafka.ConsumerTask consumer-pool-0, - unknown exception
java.lang.RuntimeException: 并发更新库存失败
	at com.crossoverjie.kafka.orderconsumer.service.impl.OrderServiceImpl.saleStockOptimisticByRedis(OrderServiceImpl.java:67)
	at com.crossoverjie.kafka.orderconsumer.service.impl.OrderServiceImpl.createOptimisticOrderUseRedisAndKafka(OrderServiceImpl.java:53)
	at com.crossoverjie.kafka.orderconsumer.service.impl.OrderServiceImpl$$FastClassBySpringCGLIB$$fc85889b.invoke(<generated>)
	at org.springframework.cglib.proxy.MethodProxy.invoke(MethodProxy.java:204)
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.invokeJoinpoint(CglibAopProxy.java:738)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:157)
	at org.springframework.transaction.interceptor.TransactionInterceptor$1.proceedWithInvocation(TransactionInterceptor.java:99)
	at org.springframework.transaction.interceptor.TransactionAspectSupport.invokeWithinTransaction(TransactionAspectSupport.java:282)
	at org.springframework.transaction.interceptor.TransactionInterceptor.invoke(TransactionInterceptor.java:96)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:179)
	at org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:673)
	at com.crossoverjie.kafka.orderconsumer.service.impl.OrderServiceImpl$$EnhancerBySpringCGLIB$$34c21228.createOptimisticOrderUseRedisAndKafka(<generated>)
	at com.crossoverjie.kafka.orderconsumer.kafka.ConsumerTask.dealMessage(ConsumerTask.java:100)
	at com.crossoverjie.kafka.orderconsumer.kafka.ConsumerTask.run(ConsumerTask.java:82)
	at java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:511)
	at java.util.concurrent.FutureTask.run(FutureTask.java:266)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at java.lang.Thread.run(Thread.java:748)
[2018-06-28 17:40:14.836] [consumer-pool-0] ERROR com.crossoverjie.kafka.orderconsumer.kafka.ConsumerTask consumer-pool-0, - unknown exception
java.lang.RuntimeException: 并发更新库存失败
	at com.crossoverjie.kafka.orderconsumer.service.impl.OrderServiceImpl.saleStockOptimisticByRedis(OrderServiceImpl.java:67)
	at com.crossoverjie.kafka.orderconsumer.service.impl.OrderServiceImpl.createOptimisticOrderUseRedisAndKafka(OrderServiceImpl.java:53)
	at com.crossoverjie.kafka.orderconsumer.service.impl.OrderServiceImpl$$FastClassBySpringCGLIB$$fc85889b.invoke(<generated>)
	at org.springframework.cglib.proxy.MethodProxy.invoke(MethodProxy.java:204)
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.invokeJoinpoint(CglibAopProxy.java:738)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:157)
	at org.springframework.transaction.interceptor.TransactionInterceptor$1.proceedWithInvocation(TransactionInterceptor.java:99)
	at org.springframework.transaction.interceptor.TransactionAspectSupport.invokeWithinTransaction(TransactionAspectSupport.java:282)
	at org.springframework.transaction.interceptor.TransactionInterceptor.invoke(TransactionInterceptor.java:96)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:179)
	at org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:673)
	at com.crossoverjie.kafka.orderconsumer.service.impl.OrderServiceImpl$$EnhancerBySpringCGLIB$$34c21228.createOptimisticOrderUseRedisAndKafka(<generated>)
	at com.crossoverjie.kafka.orderconsumer.kafka.ConsumerTask.dealMessage(ConsumerTask.java:100)
	at com.crossoverjie.kafka.orderconsumer.kafka.ConsumerTask.run(ConsumerTask.java:82)
	at java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:511)
	at java.util.concurrent.FutureTask.run(FutureTask.java:266)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at java.lang.Thread.run(Thread.java:748)
[2018-06-28 17:40:14.842] [consumer-pool-0] ERROR com.crossoverjie.kafka.orderconsumer.kafka.ConsumerTask consumer-pool-0, - unknown exception
java.lang.RuntimeException: 并发更新库存失败
	at com.crossoverjie.kafka.orderconsumer.service.impl.OrderServiceImpl.saleStockOptimisticByRedis(OrderServiceImpl.java:67)
	at com.crossoverjie.kafka.orderconsumer.service.impl.OrderServiceImpl.createOptimisticOrderUseRedisAndKafka(OrderServiceImpl.java:53)
	at com.crossoverjie.kafka.orderconsumer.service.impl.OrderServiceImpl$$FastClassBySpringCGLIB$$fc85889b.invoke(<generated>)
	at org.springframework.cglib.proxy.MethodProxy.invoke(MethodProxy.java:204)
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.invokeJoinpoint(CglibAopProxy.java:738)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:157)
	at org.springframework.transaction.interceptor.TransactionInterceptor$1.proceedWithInvocation(TransactionInterceptor.java:99)
	at org.springframework.transaction.interceptor.TransactionAspectSupport.invokeWithinTransaction(TransactionAspectSupport.java:282)
	at org.springframework.transaction.interceptor.TransactionInterceptor.invoke(TransactionInterceptor.java:96)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:179)
	at org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:673)
	at com.crossoverjie.kafka.orderconsumer.service.impl.OrderServiceImpl$$EnhancerBySpringCGLIB$$34c21228.createOptimisticOrderUseRedisAndKafka(<generated>)
	at com.crossoverjie.kafka.orderconsumer.kafka.ConsumerTask.dealMessage(ConsumerTask.java:100)
	at com.crossoverjie.kafka.orderconsumer.kafka.ConsumerTask.run(ConsumerTask.java:82)
	at java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:511)
	at java.util.concurrent.FutureTask.run(FutureTask.java:266)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at java.lang.Thread.run(Thread.java:748)
[2018-06-28 17:40:14.848] [consumer-pool-0] ERROR com.crossoverjie.kafka.orderconsumer.kafka.ConsumerTask consumer-pool-0, - unknown exception
java.lang.RuntimeException: 并发更新库存失败
	at com.crossoverjie.kafka.orderconsumer.service.impl.OrderServiceImpl.saleStockOptimisticByRedis(OrderServiceImpl.java:67)
	at com.crossoverjie.kafka.orderconsumer.service.impl.OrderServiceImpl.createOptimisticOrderUseRedisAndKafka(OrderServiceImpl.java:53)
	at com.crossoverjie.kafka.orderconsumer.service.impl.OrderServiceImpl$$FastClassBySpringCGLIB$$fc85889b.invoke(<generated>)
	at org.springframework.cglib.proxy.MethodProxy.invoke(MethodProxy.java:204)
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.invokeJoinpoint(CglibAopProxy.java:738)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:157)
	at org.springframework.transaction.interceptor.TransactionInterceptor$1.proceedWithInvocation(TransactionInterceptor.java:99)
	at org.springframework.transaction.interceptor.TransactionAspectSupport.invokeWithinTransaction(TransactionAspectSupport.java:282)
	at org.springframework.transaction.interceptor.TransactionInterceptor.invoke(TransactionInterceptor.java:96)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:179)
	at org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:673)
	at com.crossoverjie.kafka.orderconsumer.service.impl.OrderServiceImpl$$EnhancerBySpringCGLIB$$34c21228.createOptimisticOrderUseRedisAndKafka(<generated>)
	at com.crossoverjie.kafka.orderconsumer.kafka.ConsumerTask.dealMessage(ConsumerTask.java:100)
	at com.crossoverjie.kafka.orderconsumer.kafka.ConsumerTask.run(ConsumerTask.java:82)
	at java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:511)
	at java.util.concurrent.FutureTask.run(FutureTask.java:266)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at java.lang.Thread.run(Thread.java:748)
[2018-06-28 17:40:14.853] [consumer-pool-0] ERROR com.crossoverjie.kafka.orderconsumer.kafka.ConsumerTask consumer-pool-0, - unknown exception
java.lang.RuntimeException: 并发更新库存失败
	at com.crossoverjie.kafka.orderconsumer.service.impl.OrderServiceImpl.saleStockOptimisticByRedis(OrderServiceImpl.java:67)
	at com.crossoverjie.kafka.orderconsumer.service.impl.OrderServiceImpl.createOptimisticOrderUseRedisAndKafka(OrderServiceImpl.java:53)
	at com.crossoverjie.kafka.orderconsumer.service.impl.OrderServiceImpl$$FastClassBySpringCGLIB$$fc85889b.invoke(<generated>)
	at org.springframework.cglib.proxy.MethodProxy.invoke(MethodProxy.java:204)
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.invokeJoinpoint(CglibAopProxy.java:738)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:157)
	at org.springframework.transaction.interceptor.TransactionInterceptor$1.proceedWithInvocation(TransactionInterceptor.java:99)
	at org.springframework.transaction.interceptor.TransactionAspectSupport.invokeWithinTransaction(TransactionAspectSupport.java:282)
	at org.springframework.transaction.interceptor.TransactionInterceptor.invoke(TransactionInterceptor.java:96)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:179)
	at org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:673)
	at com.crossoverjie.kafka.orderconsumer.service.impl.OrderServiceImpl$$EnhancerBySpringCGLIB$$34c21228.createOptimisticOrderUseRedisAndKafka(<generated>)
	at com.crossoverjie.kafka.orderconsumer.kafka.ConsumerTask.dealMessage(ConsumerTask.java:100)
	at com.crossoverjie.kafka.orderconsumer.kafka.ConsumerTask.run(ConsumerTask.java:82)
	at java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:511)
	at java.util.concurrent.FutureTask.run(FutureTask.java:266)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at java.lang.Thread.run(Thread.java:748)
[2018-06-28 17:40:14.859] [consumer-pool-0] ERROR com.crossoverjie.kafka.orderconsumer.kafka.ConsumerTask consumer-pool-0, - unknown exception
java.lang.RuntimeException: 并发更新库存失败
	at com.crossoverjie.kafka.orderconsumer.service.impl.OrderServiceImpl.saleStockOptimisticByRedis(OrderServiceImpl.java:67)
	at com.crossoverjie.kafka.orderconsumer.service.impl.OrderServiceImpl.createOptimisticOrderUseRedisAndKafka(OrderServiceImpl.java:53)
	at com.crossoverjie.kafka.orderconsumer.service.impl.OrderServiceImpl$$FastClassBySpringCGLIB$$fc85889b.invoke(<generated>)
	at org.springframework.cglib.proxy.MethodProxy.invoke(MethodProxy.java:204)
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.invokeJoinpoint(CglibAopProxy.java:738)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:157)
	at org.springframework.transaction.interceptor.TransactionInterceptor$1.proceedWithInvocation(TransactionInterceptor.java:99)
	at org.springframework.transaction.interceptor.TransactionAspectSupport.invokeWithinTransaction(TransactionAspectSupport.java:282)
	at org.springframework.transaction.interceptor.TransactionInterceptor.invoke(TransactionInterceptor.java:96)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:179)
	at org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:673)
	at com.crossoverjie.kafka.orderconsumer.service.impl.OrderServiceImpl$$EnhancerBySpringCGLIB$$34c21228.createOptimisticOrderUseRedisAndKafka(<generated>)
	at com.crossoverjie.kafka.orderconsumer.kafka.ConsumerTask.dealMessage(ConsumerTask.java:100)
	at com.crossoverjie.kafka.orderconsumer.kafka.ConsumerTask.run(ConsumerTask.java:82)
	at java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:511)
	at java.util.concurrent.FutureTask.run(FutureTask.java:266)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at java.lang.Thread.run(Thread.java:748)
[2018-06-28 17:40:14.863] [consumer-pool-0] ERROR com.crossoverjie.kafka.orderconsumer.kafka.ConsumerTask consumer-pool-0, - unknown exception
java.lang.RuntimeException: 并发更新库存失败
	at com.crossoverjie.kafka.orderconsumer.service.impl.OrderServiceImpl.saleStockOptimisticByRedis(OrderServiceImpl.java:67)
	at com.crossoverjie.kafka.orderconsumer.service.impl.OrderServiceImpl.createOptimisticOrderUseRedisAndKafka(OrderServiceImpl.java:53)
	at com.crossoverjie.kafka.orderconsumer.service.impl.OrderServiceImpl$$FastClassBySpringCGLIB$$fc85889b.invoke(<generated>)
	at org.springframework.cglib.proxy.MethodProxy.invoke(MethodProxy.java:204)
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.invokeJoinpoint(CglibAopProxy.java:738)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:157)
	at org.springframework.transaction.interceptor.TransactionInterceptor$1.proceedWithInvocation(TransactionInterceptor.java:99)
	at org.springframework.transaction.interceptor.TransactionAspectSupport.invokeWithinTransaction(TransactionAspectSupport.java:282)
	at org.springframework.transaction.interceptor.TransactionInterceptor.invoke(TransactionInterceptor.java:96)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:179)
	at org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:673)
	at com.crossoverjie.kafka.orderconsumer.service.impl.OrderServiceImpl$$EnhancerBySpringCGLIB$$34c21228.createOptimisticOrderUseRedisAndKafka(<generated>)
	at com.crossoverjie.kafka.orderconsumer.kafka.ConsumerTask.dealMessage(ConsumerTask.java:100)
	at com.crossoverjie.kafka.orderconsumer.kafka.ConsumerTask.run(ConsumerTask.java:82)
	at java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:511)
	at java.util.concurrent.FutureTask.run(FutureTask.java:266)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at java.lang.Thread.run(Thread.java:748)
[2018-06-28 17:40:14.868] [consumer-pool-0] ERROR com.crossoverjie.kafka.orderconsumer.kafka.ConsumerTask consumer-pool-0, - unknown exception
java.lang.RuntimeException: 并发更新库存失败
	at com.crossoverjie.kafka.orderconsumer.service.impl.OrderServiceImpl.saleStockOptimisticByRedis(OrderServiceImpl.java:67)
	at com.crossoverjie.kafka.orderconsumer.service.impl.OrderServiceImpl.createOptimisticOrderUseRedisAndKafka(OrderServiceImpl.java:53)
	at com.crossoverjie.kafka.orderconsumer.service.impl.OrderServiceImpl$$FastClassBySpringCGLIB$$fc85889b.invoke(<generated>)
	at org.springframework.cglib.proxy.MethodProxy.invoke(MethodProxy.java:204)
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.invokeJoinpoint(CglibAopProxy.java:738)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:157)
	at org.springframework.transaction.interceptor.TransactionInterceptor$1.proceedWithInvocation(TransactionInterceptor.java:99)
	at org.springframework.transaction.interceptor.TransactionAspectSupport.invokeWithinTransaction(TransactionAspectSupport.java:282)
	at org.springframework.transaction.interceptor.TransactionInterceptor.invoke(TransactionInterceptor.java:96)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:179)
	at org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:673)
	at com.crossoverjie.kafka.orderconsumer.service.impl.OrderServiceImpl$$EnhancerBySpringCGLIB$$34c21228.createOptimisticOrderUseRedisAndKafka(<generated>)
	at com.crossoverjie.kafka.orderconsumer.kafka.ConsumerTask.dealMessage(ConsumerTask.java:100)
	at com.crossoverjie.kafka.orderconsumer.kafka.ConsumerTask.run(ConsumerTask.java:82)
	at java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:511)
	at java.util.concurrent.FutureTask.run(FutureTask.java:266)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at java.lang.Thread.run(Thread.java:748)
[2018-06-28 17:40:14.873] [consumer-pool-0] ERROR com.crossoverjie.kafka.orderconsumer.kafka.ConsumerTask consumer-pool-0, - unknown exception
java.lang.RuntimeException: 并发更新库存失败
	at com.crossoverjie.kafka.orderconsumer.service.impl.OrderServiceImpl.saleStockOptimisticByRedis(OrderServiceImpl.java:67)
	at com.crossoverjie.kafka.orderconsumer.service.impl.OrderServiceImpl.createOptimisticOrderUseRedisAndKafka(OrderServiceImpl.java:53)
	at com.crossoverjie.kafka.orderconsumer.service.impl.OrderServiceImpl$$FastClassBySpringCGLIB$$fc85889b.invoke(<generated>)
	at org.springframework.cglib.proxy.MethodProxy.invoke(MethodProxy.java:204)
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.invokeJoinpoint(CglibAopProxy.java:738)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:157)
	at org.springframework.transaction.interceptor.TransactionInterceptor$1.proceedWithInvocation(TransactionInterceptor.java:99)
	at org.springframework.transaction.interceptor.TransactionAspectSupport.invokeWithinTransaction(TransactionAspectSupport.java:282)
	at org.springframework.transaction.interceptor.TransactionInterceptor.invoke(TransactionInterceptor.java:96)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:179)
	at org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:673)
	at com.crossoverjie.kafka.orderconsumer.service.impl.OrderServiceImpl$$EnhancerBySpringCGLIB$$34c21228.createOptimisticOrderUseRedisAndKafka(<generated>)
	at com.crossoverjie.kafka.orderconsumer.kafka.ConsumerTask.dealMessage(ConsumerTask.java:100)
	at com.crossoverjie.kafka.orderconsumer.kafka.ConsumerTask.run(ConsumerTask.java:82)
	at java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:511)
	at java.util.concurrent.FutureTask.run(FutureTask.java:266)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at java.lang.Thread.run(Thread.java:748)
[2018-06-28 17:40:14.885] [consumer-pool-0] ERROR com.crossoverjie.kafka.orderconsumer.kafka.ConsumerTask consumer-pool-0, - unknown exception
java.lang.RuntimeException: 并发更新库存失败
	at com.crossoverjie.kafka.orderconsumer.service.impl.OrderServiceImpl.saleStockOptimisticByRedis(OrderServiceImpl.java:67)
	at com.crossoverjie.kafka.orderconsumer.service.impl.OrderServiceImpl.createOptimisticOrderUseRedisAndKafka(OrderServiceImpl.java:53)
	at com.crossoverjie.kafka.orderconsumer.service.impl.OrderServiceImpl$$FastClassBySpringCGLIB$$fc85889b.invoke(<generated>)
	at org.springframework.cglib.proxy.MethodProxy.invoke(MethodProxy.java:204)
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.invokeJoinpoint(CglibAopProxy.java:738)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:157)
	at org.springframework.transaction.interceptor.TransactionInterceptor$1.proceedWithInvocation(TransactionInterceptor.java:99)
	at org.springframework.transaction.interceptor.TransactionAspectSupport.invokeWithinTransaction(TransactionAspectSupport.java:282)
	at org.springframework.transaction.interceptor.TransactionInterceptor.invoke(TransactionInterceptor.java:96)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:179)
	at org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:673)
	at com.crossoverjie.kafka.orderconsumer.service.impl.OrderServiceImpl$$EnhancerBySpringCGLIB$$34c21228.createOptimisticOrderUseRedisAndKafka(<generated>)
	at com.crossoverjie.kafka.orderconsumer.kafka.ConsumerTask.dealMessage(ConsumerTask.java:100)
	at com.crossoverjie.kafka.orderconsumer.kafka.ConsumerTask.run(ConsumerTask.java:82)
	at java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:511)
	at java.util.concurrent.FutureTask.run(FutureTask.java:266)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at java.lang.Thread.run(Thread.java:748)
[2018-06-28 17:40:14.891] [consumer-pool-0] ERROR com.crossoverjie.kafka.orderconsumer.kafka.ConsumerTask consumer-pool-0, - unknown exception
java.lang.RuntimeException: 并发更新库存失败
	at com.crossoverjie.kafka.orderconsumer.service.impl.OrderServiceImpl.saleStockOptimisticByRedis(OrderServiceImpl.java:67)
	at com.crossoverjie.kafka.orderconsumer.service.impl.OrderServiceImpl.createOptimisticOrderUseRedisAndKafka(OrderServiceImpl.java:53)
	at com.crossoverjie.kafka.orderconsumer.service.impl.OrderServiceImpl$$FastClassBySpringCGLIB$$fc85889b.invoke(<generated>)
	at org.springframework.cglib.proxy.MethodProxy.invoke(MethodProxy.java:204)
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.invokeJoinpoint(CglibAopProxy.java:738)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:157)
	at org.springframework.transaction.interceptor.TransactionInterceptor$1.proceedWithInvocation(TransactionInterceptor.java:99)
	at org.springframework.transaction.interceptor.TransactionAspectSupport.invokeWithinTransaction(TransactionAspectSupport.java:282)
	at org.springframework.transaction.interceptor.TransactionInterceptor.invoke(TransactionInterceptor.java:96)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:179)
	at org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:673)
	at com.crossoverjie.kafka.orderconsumer.service.impl.OrderServiceImpl$$EnhancerBySpringCGLIB$$34c21228.createOptimisticOrderUseRedisAndKafka(<generated>)
	at com.crossoverjie.kafka.orderconsumer.kafka.ConsumerTask.dealMessage(ConsumerTask.java:100)
	at com.crossoverjie.kafka.orderconsumer.kafka.ConsumerTask.run(ConsumerTask.java:82)
	at java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:511)
	at java.util.concurrent.FutureTask.run(FutureTask.java:266)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at java.lang.Thread.run(Thread.java:748)
[2018-06-28 17:40:14.898] [consumer-pool-0] ERROR com.crossoverjie.kafka.orderconsumer.kafka.ConsumerTask consumer-pool-0, - unknown exception
java.lang.RuntimeException: 并发更新库存失败
	at com.crossoverjie.kafka.orderconsumer.service.impl.OrderServiceImpl.saleStockOptimisticByRedis(OrderServiceImpl.java:67)
	at com.crossoverjie.kafka.orderconsumer.service.impl.OrderServiceImpl.createOptimisticOrderUseRedisAndKafka(OrderServiceImpl.java:53)
	at com.crossoverjie.kafka.orderconsumer.service.impl.OrderServiceImpl$$FastClassBySpringCGLIB$$fc85889b.invoke(<generated>)
	at org.springframework.cglib.proxy.MethodProxy.invoke(MethodProxy.java:204)
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.invokeJoinpoint(CglibAopProxy.java:738)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:157)
	at org.springframework.transaction.interceptor.TransactionInterceptor$1.proceedWithInvocation(TransactionInterceptor.java:99)
	at org.springframework.transaction.interceptor.TransactionAspectSupport.invokeWithinTransaction(TransactionAspectSupport.java:282)
	at org.springframework.transaction.interceptor.TransactionInterceptor.invoke(TransactionInterceptor.java:96)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:179)
	at org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:673)
	at com.crossoverjie.kafka.orderconsumer.service.impl.OrderServiceImpl$$EnhancerBySpringCGLIB$$34c21228.createOptimisticOrderUseRedisAndKafka(<generated>)
	at com.crossoverjie.kafka.orderconsumer.kafka.ConsumerTask.dealMessage(ConsumerTask.java:100)
	at com.crossoverjie.kafka.orderconsumer.kafka.ConsumerTask.run(ConsumerTask.java:82)
	at java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:511)
	at java.util.concurrent.FutureTask.run(FutureTask.java:266)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at java.lang.Thread.run(Thread.java:748)
[2018-06-28 17:40:14.902] [consumer-pool-0] ERROR com.crossoverjie.kafka.orderconsumer.kafka.ConsumerTask consumer-pool-0, - unknown exception
java.lang.RuntimeException: 并发更新库存失败
	at com.crossoverjie.kafka.orderconsumer.service.impl.OrderServiceImpl.saleStockOptimisticByRedis(OrderServiceImpl.java:67)
	at com.crossoverjie.kafka.orderconsumer.service.impl.OrderServiceImpl.createOptimisticOrderUseRedisAndKafka(OrderServiceImpl.java:53)
	at com.crossoverjie.kafka.orderconsumer.service.impl.OrderServiceImpl$$FastClassBySpringCGLIB$$fc85889b.invoke(<generated>)
	at org.springframework.cglib.proxy.MethodProxy.invoke(MethodProxy.java:204)
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.invokeJoinpoint(CglibAopProxy.java:738)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:157)
	at org.springframework.transaction.interceptor.TransactionInterceptor$1.proceedWithInvocation(TransactionInterceptor.java:99)
	at org.springframework.transaction.interceptor.TransactionAspectSupport.invokeWithinTransaction(TransactionAspectSupport.java:282)
	at org.springframework.transaction.interceptor.TransactionInterceptor.invoke(TransactionInterceptor.java:96)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:179)
	at org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:673)
	at com.crossoverjie.kafka.orderconsumer.service.impl.OrderServiceImpl$$EnhancerBySpringCGLIB$$34c21228.createOptimisticOrderUseRedisAndKafka(<generated>)
	at com.crossoverjie.kafka.orderconsumer.kafka.ConsumerTask.dealMessage(ConsumerTask.java:100)
	at com.crossoverjie.kafka.orderconsumer.kafka.ConsumerTask.run(ConsumerTask.java:82)
	at java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:511)
	at java.util.concurrent.FutureTask.run(FutureTask.java:266)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at java.lang.Thread.run(Thread.java:748)
[2018-06-28 17:40:14.905] [consumer-pool-0] ERROR com.crossoverjie.kafka.orderconsumer.kafka.ConsumerTask consumer-pool-0, - unknown exception
java.lang.RuntimeException: 并发更新库存失败
	at com.crossoverjie.kafka.orderconsumer.service.impl.OrderServiceImpl.saleStockOptimisticByRedis(OrderServiceImpl.java:67)
	at com.crossoverjie.kafka.orderconsumer.service.impl.OrderServiceImpl.createOptimisticOrderUseRedisAndKafka(OrderServiceImpl.java:53)
	at com.crossoverjie.kafka.orderconsumer.service.impl.OrderServiceImpl$$FastClassBySpringCGLIB$$fc85889b.invoke(<generated>)
	at org.springframework.cglib.proxy.MethodProxy.invoke(MethodProxy.java:204)
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.invokeJoinpoint(CglibAopProxy.java:738)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:157)
	at org.springframework.transaction.interceptor.TransactionInterceptor$1.proceedWithInvocation(TransactionInterceptor.java:99)
	at org.springframework.transaction.interceptor.TransactionAspectSupport.invokeWithinTransaction(TransactionAspectSupport.java:282)
	at org.springframework.transaction.interceptor.TransactionInterceptor.invoke(TransactionInterceptor.java:96)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:179)
	at org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:673)
	at com.crossoverjie.kafka.orderconsumer.service.impl.OrderServiceImpl$$EnhancerBySpringCGLIB$$34c21228.createOptimisticOrderUseRedisAndKafka(<generated>)
	at com.crossoverjie.kafka.orderconsumer.kafka.ConsumerTask.dealMessage(ConsumerTask.java:100)
	at com.crossoverjie.kafka.orderconsumer.kafka.ConsumerTask.run(ConsumerTask.java:82)
	at java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:511)
	at java.util.concurrent.FutureTask.run(FutureTask.java:266)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at java.lang.Thread.run(Thread.java:748)
[2018-06-28 17:40:14.908] [consumer-pool-0] ERROR com.crossoverjie.kafka.orderconsumer.kafka.ConsumerTask consumer-pool-0, - unknown exception
java.lang.RuntimeException: 并发更新库存失败
	at com.crossoverjie.kafka.orderconsumer.service.impl.OrderServiceImpl.saleStockOptimisticByRedis(OrderServiceImpl.java:67)
	at com.crossoverjie.kafka.orderconsumer.service.impl.OrderServiceImpl.createOptimisticOrderUseRedisAndKafka(OrderServiceImpl.java:53)
	at com.crossoverjie.kafka.orderconsumer.service.impl.OrderServiceImpl$$FastClassBySpringCGLIB$$fc85889b.invoke(<generated>)
	at org.springframework.cglib.proxy.MethodProxy.invoke(MethodProxy.java:204)
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.invokeJoinpoint(CglibAopProxy.java:738)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:157)
	at org.springframework.transaction.interceptor.TransactionInterceptor$1.proceedWithInvocation(TransactionInterceptor.java:99)
	at org.springframework.transaction.interceptor.TransactionAspectSupport.invokeWithinTransaction(TransactionAspectSupport.java:282)
	at org.springframework.transaction.interceptor.TransactionInterceptor.invoke(TransactionInterceptor.java:96)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:179)
	at org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:673)
	at com.crossoverjie.kafka.orderconsumer.service.impl.OrderServiceImpl$$EnhancerBySpringCGLIB$$34c21228.createOptimisticOrderUseRedisAndKafka(<generated>)
	at com.crossoverjie.kafka.orderconsumer.kafka.ConsumerTask.dealMessage(ConsumerTask.java:100)
	at com.crossoverjie.kafka.orderconsumer.kafka.ConsumerTask.run(ConsumerTask.java:82)
	at java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:511)
	at java.util.concurrent.FutureTask.run(FutureTask.java:266)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at java.lang.Thread.run(Thread.java:748)
[2018-06-28 17:40:14.914] [consumer-pool-0] ERROR com.crossoverjie.kafka.orderconsumer.kafka.ConsumerTask consumer-pool-0, - unknown exception
java.lang.RuntimeException: 并发更新库存失败
	at com.crossoverjie.kafka.orderconsumer.service.impl.OrderServiceImpl.saleStockOptimisticByRedis(OrderServiceImpl.java:67)
	at com.crossoverjie.kafka.orderconsumer.service.impl.OrderServiceImpl.createOptimisticOrderUseRedisAndKafka(OrderServiceImpl.java:53)
	at com.crossoverjie.kafka.orderconsumer.service.impl.OrderServiceImpl$$FastClassBySpringCGLIB$$fc85889b.invoke(<generated>)
	at org.springframework.cglib.proxy.MethodProxy.invoke(MethodProxy.java:204)
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.invokeJoinpoint(CglibAopProxy.java:738)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:157)
	at org.springframework.transaction.interceptor.TransactionInterceptor$1.proceedWithInvocation(TransactionInterceptor.java:99)
	at org.springframework.transaction.interceptor.TransactionAspectSupport.invokeWithinTransaction(TransactionAspectSupport.java:282)
	at org.springframework.transaction.interceptor.TransactionInterceptor.invoke(TransactionInterceptor.java:96)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:179)
	at org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:673)
	at com.crossoverjie.kafka.orderconsumer.service.impl.OrderServiceImpl$$EnhancerBySpringCGLIB$$34c21228.createOptimisticOrderUseRedisAndKafka(<generated>)
	at com.crossoverjie.kafka.orderconsumer.kafka.ConsumerTask.dealMessage(ConsumerTask.java:100)
	at com.crossoverjie.kafka.orderconsumer.kafka.ConsumerTask.run(ConsumerTask.java:82)
	at java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:511)
	at java.util.concurrent.FutureTask.run(FutureTask.java:266)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at java.lang.Thread.run(Thread.java:748)
[2018-06-28 17:40:14.922] [consumer-pool-0] ERROR com.crossoverjie.kafka.orderconsumer.kafka.ConsumerTask consumer-pool-0, - unknown exception
java.lang.RuntimeException: 并发更新库存失败
	at com.crossoverjie.kafka.orderconsumer.service.impl.OrderServiceImpl.saleStockOptimisticByRedis(OrderServiceImpl.java:67)
	at com.crossoverjie.kafka.orderconsumer.service.impl.OrderServiceImpl.createOptimisticOrderUseRedisAndKafka(OrderServiceImpl.java:53)
	at com.crossoverjie.kafka.orderconsumer.service.impl.OrderServiceImpl$$FastClassBySpringCGLIB$$fc85889b.invoke(<generated>)
	at org.springframework.cglib.proxy.MethodProxy.invoke(MethodProxy.java:204)
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.invokeJoinpoint(CglibAopProxy.java:738)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:157)
	at org.springframework.transaction.interceptor.TransactionInterceptor$1.proceedWithInvocation(TransactionInterceptor.java:99)
	at org.springframework.transaction.interceptor.TransactionAspectSupport.invokeWithinTransaction(TransactionAspectSupport.java:282)
	at org.springframework.transaction.interceptor.TransactionInterceptor.invoke(TransactionInterceptor.java:96)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:179)
	at org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:673)
	at com.crossoverjie.kafka.orderconsumer.service.impl.OrderServiceImpl$$EnhancerBySpringCGLIB$$34c21228.createOptimisticOrderUseRedisAndKafka(<generated>)
	at com.crossoverjie.kafka.orderconsumer.kafka.ConsumerTask.dealMessage(ConsumerTask.java:100)
	at com.crossoverjie.kafka.orderconsumer.kafka.ConsumerTask.run(ConsumerTask.java:82)
	at java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:511)
	at java.util.concurrent.FutureTask.run(FutureTask.java:266)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at java.lang.Thread.run(Thread.java:748)
[2018-06-28 17:40:14.929] [consumer-pool-0] ERROR com.crossoverjie.kafka.orderconsumer.kafka.ConsumerTask consumer-pool-0, - unknown exception
java.lang.RuntimeException: 并发更新库存失败
	at com.crossoverjie.kafka.orderconsumer.service.impl.OrderServiceImpl.saleStockOptimisticByRedis(OrderServiceImpl.java:67)
	at com.crossoverjie.kafka.orderconsumer.service.impl.OrderServiceImpl.createOptimisticOrderUseRedisAndKafka(OrderServiceImpl.java:53)
	at com.crossoverjie.kafka.orderconsumer.service.impl.OrderServiceImpl$$FastClassBySpringCGLIB$$fc85889b.invoke(<generated>)
	at org.springframework.cglib.proxy.MethodProxy.invoke(MethodProxy.java:204)
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.invokeJoinpoint(CglibAopProxy.java:738)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:157)
	at org.springframework.transaction.interceptor.TransactionInterceptor$1.proceedWithInvocation(TransactionInterceptor.java:99)
	at org.springframework.transaction.interceptor.TransactionAspectSupport.invokeWithinTransaction(TransactionAspectSupport.java:282)
	at org.springframework.transaction.interceptor.TransactionInterceptor.invoke(TransactionInterceptor.java:96)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:179)
	at org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:673)
	at com.crossoverjie.kafka.orderconsumer.service.impl.OrderServiceImpl$$EnhancerBySpringCGLIB$$34c21228.createOptimisticOrderUseRedisAndKafka(<generated>)
	at com.crossoverjie.kafka.orderconsumer.kafka.ConsumerTask.dealMessage(ConsumerTask.java:100)
	at com.crossoverjie.kafka.orderconsumer.kafka.ConsumerTask.run(ConsumerTask.java:82)
	at java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:511)
	at java.util.concurrent.FutureTask.run(FutureTask.java:266)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at java.lang.Thread.run(Thread.java:748)
[2018-06-28 17:40:14.934] [consumer-pool-0] ERROR com.crossoverjie.kafka.orderconsumer.kafka.ConsumerTask consumer-pool-0, - unknown exception
java.lang.RuntimeException: 并发更新库存失败
	at com.crossoverjie.kafka.orderconsumer.service.impl.OrderServiceImpl.saleStockOptimisticByRedis(OrderServiceImpl.java:67)
	at com.crossoverjie.kafka.orderconsumer.service.impl.OrderServiceImpl.createOptimisticOrderUseRedisAndKafka(OrderServiceImpl.java:53)
	at com.crossoverjie.kafka.orderconsumer.service.impl.OrderServiceImpl$$FastClassBySpringCGLIB$$fc85889b.invoke(<generated>)
	at org.springframework.cglib.proxy.MethodProxy.invoke(MethodProxy.java:204)
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.invokeJoinpoint(CglibAopProxy.java:738)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:157)
	at org.springframework.transaction.interceptor.TransactionInterceptor$1.proceedWithInvocation(TransactionInterceptor.java:99)
	at org.springframework.transaction.interceptor.TransactionAspectSupport.invokeWithinTransaction(TransactionAspectSupport.java:282)
	at org.springframework.transaction.interceptor.TransactionInterceptor.invoke(TransactionInterceptor.java:96)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:179)
	at org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:673)
	at com.crossoverjie.kafka.orderconsumer.service.impl.OrderServiceImpl$$EnhancerBySpringCGLIB$$34c21228.createOptimisticOrderUseRedisAndKafka(<generated>)
	at com.crossoverjie.kafka.orderconsumer.kafka.ConsumerTask.dealMessage(ConsumerTask.java:100)
	at com.crossoverjie.kafka.orderconsumer.kafka.ConsumerTask.run(ConsumerTask.java:82)
	at java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:511)
	at java.util.concurrent.FutureTask.run(FutureTask.java:266)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at java.lang.Thread.run(Thread.java:748)
